{"version":3,"sources":["pages/LoginPage/LoginPage.js"],"names":["mapStateToProps","createStructuredSelector","currentUser","selectCurrentUser","connect","dispatch","githubSignInStart","code","history","useHistory","search","useLocation","push","params","URLSearchParams","get","authState","useEffect","sessionStorage","getItem","console","warn","data-test","className"],"mappings":"0GAAA,0EAwCMA,EAAkBC,YAAyB,CAC/CC,YAAaC,MAOAC,sBAAQJ,GAJI,SAACK,GAAD,MAAe,CACxCC,kBAAmB,SAACC,GAAD,OAAUF,EAASC,YAAkBC,QAG3CH,EArCG,SAAC,GAAwC,IAAtCF,EAAqC,EAArCA,YAAaI,EAAwB,EAAxBA,kBAC1BE,EAAUC,cACRC,EAAWC,cAAXD,OACJR,GAAaM,EAAQI,KAAK,KAC9B,IAAMC,EAAS,IAAIC,gBAAgBJ,GAC7BH,EAAOM,EAAOE,IAAI,QAClBC,EAAYH,EAAOE,IAAI,SAW7B,OATAE,qBAAU,WACR,GAAIV,EAAM,CACR,IAAKS,IAAcE,eAAeC,QAAQ,aACxC,OAAOC,QAAQC,KAAK,8BAEtBf,EAAkBC,MAEnB,CAACS,EAAWT,EAAMD,IAGnB,0BAAMgB,YAAU,aAAaC,UAAU,cACrC,yBAAKA,UAAU,yBACf,kBAAC,UAAD","file":"static/js/8.ffd1057f.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { githubSignInStart } from '../../redux/user/userActions';\nimport { selectCurrentUser } from '../../redux/user/userSelectors';\n\nimport LoginCard from '../../components/LoginCard/LoginCard';\n\nconst LoginPage = ({ currentUser, githubSignInStart }) => {\n  const history = useHistory();\n  const { search } = useLocation();\n  if (currentUser) history.push('/');\n  const params = new URLSearchParams(search);\n  const code = params.get('code');\n  const authState = params.get('state');\n\n  useEffect(() => {\n    if (code) {\n      if (!authState === sessionStorage.getItem('authState')) {\n        return console.warn('Auth state does not match.');\n      }\n      githubSignInStart(code);\n    }\n  }, [authState, code, githubSignInStart]);\n\n  return (\n    <main data-test=\"page-login\" className=\"login-page\">\n      <div className=\"login-page__showcase\"></div>\n      <LoginCard />\n    </main>\n  );\n};\n\nLoginPage.propTypes = {\n  currentUser: PropTypes.object,\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  githubSignInStart: (code) => dispatch(githubSignInStart(code)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginPage);\n"],"sourceRoot":""}