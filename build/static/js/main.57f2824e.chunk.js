(this.webpackJsonpinstaclone=this.webpackJsonpinstaclone||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a(4);t.default=function(){return r.a.createElement("a",{style:{textDecoration:"none"},href:"https://github.com/chawaa/timcha",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(c.default,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},inverted:!0},r.a.createElement(o.default,{style:{marginRight:"1rem"},icon:"logo-github"}),"View on GitHub"))}},101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),s=a(4);t.default=function(e){var t=e.button,a=e.style,n=Math.random().toString(36).slice(2);return sessionStorage.setItem("authState",n),r.a.createElement("a",{href:"https://github.com/login/oauth/authorize?client_id=".concat("2b37ac447010b84fa1fa","&redirect_uri=").concat(window.location.origin,"/login&state=").concat(n,"&scope=user:email"),className:o()({"github-login-button":!0,button:t}),style:a},r.a.createElement(s.default,{style:{marginRight:"1rem"},icon:"logo-github",className:o()({"color-white":t})}),r.a.createElement("h3",{className:o()({"heading-4":!0,"color-white":t})},"Log in with GitHub"))}},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(e){var t=e.children;return r.a.createElement("div",{className:"image-grid"},t)}},103:function(e,t,a){"use strict";a.r(t),a.d(t,"UnconnectedApp",(function(){return x}));var n=a(0),r=a.n(n),c=a(24),o=a(8),s=a(38),i=a(11),l=a(36),u=a(162),m=a(79),d=a(68),f=a(139),p=a(141),h=a(142),b=a(148),g=a(149),E=a(154),v=function(){return r.a.createElement("main",{className:"loading-page"},r.a.createElement(E.a,null))},O=Object(n.lazy)((function(){return a.e(4).then(a.bind(null,532))})),j=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,523))})),y=Object(n.lazy)((function(){return a.e(6).then(a.bind(null,524))})),_=Object(n.lazy)((function(){return a.e(12).then(a.bind(null,525))})),w=Object(n.lazy)((function(){return a.e(5).then(a.bind(null,526))})),N=Object(n.lazy)((function(){return a.e(8).then(a.bind(null,527))})),S=Object(n.lazy)((function(){return a.e(13).then(a.bind(null,528))})),T=Object(n.lazy)((function(){return a.e(7).then(a.bind(null,529))})),C=Object(n.lazy)((function(){return a.e(9).then(a.bind(null,530))})),k=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,531))})),I=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,522))}));function x(e){var t=e.signInStart,a=e.modal,o=e.alert,i=e.currentUser,l=e.connectSocket,u=e.fetchNotificationsStart,m=localStorage.getItem("token"),E=Object(c.g)().location.pathname;Object(n.useEffect)((function(){m&&(t(null,null,m),l(),u(m))}),[t,l,u,m]);var x=Object(s.b)(o.showAlert,null,{from:{transform:"translateY(4rem)"},enter:{transform:"translateY(0rem)"},leave:{transform:"translateY(4rem)"},config:{tension:500,friction:50}});return r.a.createElement("div",{className:"app","data-test":"component-app"},r.a.createElement(n.Suspense,{fallback:r.a.createElement(v,null)},!i&&m?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,"/login"!==E&&"/signup"!==E&&r.a.createElement(f.default,null),function(){if(a.modals.length>0)return document.querySelector("body").setAttribute("style","overflow: hidden;"),a.modals.map((function(e,t){return r.a.createElement(p.default,Object.assign({key:t,component:e.component},e.props))}));document.querySelector("body").setAttribute("style","")}(),x.map((function(e){var t=e.item,a=e.props,n=e.key;return t&&r.a.createElement(h.default,{key:n,style:a,onClick:o.onClick},o.text)})),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/login",component:N}),r.a.createElement(c.b,{path:"/signup",component:S}),r.a.createElement(d.default,{exact:!0,path:"/",component:T}),r.a.createElement(d.default,{path:"/settings",component:_}),r.a.createElement(d.default,{path:"/activity",component:w}),r.a.createElement(d.default,{path:"/new",component:C}),r.a.createElement(d.default,{path:"/explore",component:k}),r.a.createElement(c.b,{exact:!0,path:"/:username",component:O}),r.a.createElement(c.b,{path:"/post/:postId",component:j}),r.a.createElement(d.default,{path:"/confirm/:token",component:y}),r.a.createElement(c.b,{component:I})),"/"!==E&&r.a.createElement(b.default,null),"/login"!==E&&"/signup"!==E&&"/new"!==E&&i&&r.a.createElement(g.default,{currentUser:i}))))}t.default=Object(o.b)((function(e){return{modal:e.modal,alert:e.alert,currentUser:Object(i.a)(e)}}),(function(e){return{signInStart:function(t,a,n){return e(Object(l.e)(t,a,n))},connectSocket:function(){return e(Object(u.a)())},fetchNotificationsStart:function(t){return e(Object(m.c)(t))}}}))(x)},107:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={formatHref:function(e,t){return"hashtag"===t&&(e="/explore/tags/"+e.substring(1)),"mention"===t&&(e="/"+e.substring(1)),e},className:"styled-link",attributes:{target:{url:"_blank"}}}},108:function(e,t,a){"use strict";t.a={CONNECT:"CONNECT",DISCONNECT:"DISCONNECT"}},109:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return m})),a.d(t,"a",(function(){return d}));var n=a(2),r=a.n(n),c=a(1),o=a(3),s=a(10),i=a.n(s),l=function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){var o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t&&a?{data:{usernameOrEmail:t,password:a}}:{headers:{authorization:n}},e.next=4,i()("/api/auth/login",Object(c.a)({method:"POST"},o));case 4:return s=e.sent,e.abrupt("return",s.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/api/auth/login/github",{code:t,state:sessionStorage.getItem("authState")});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(r.a.mark((function e(t,a,n,c){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/api/auth/register",{email:t,fullName:a,username:n,password:c});case 3:return o=e.sent,e.abrupt("return",o.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.put("/api/auth/password",{oldPassword:t,newPassword:a},{headers:{authorization:n}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a,n){return e.apply(this,arguments)}}()},11:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return u}));var n=a(9),r=function(e){return e.user},c=Object(n.a)([r],(function(e){return e.currentUser})),o=Object(n.a)([r],(function(e){return e.error})),s=Object(n.a)([r],(function(e){return e.token})),i=Object(n.a)([r],(function(e){return e.fetching})),l=Object(n.a)([r],(function(e){return e.fetchingAvatar})),u=Object(n.a)([r],(function(e){return e.updatingProfile}))},110:function(e,t,a){"use strict";t.a={SHOW_MODAL:"SHOW_MODAL",HIDE_MODAL:"HIDE_MODAL"}},111:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a(9),r=function(e){return e.notifications},c=Object(n.a)([r],(function(e){return e.notifications})),o=Object(n.a)([r],(function(e){return e}))},119:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(0),s=a.n(o),i=a(8),l=a(9),u=a(36),m=a(11),d=a(22),f=a(30),p=Object(l.b)({currentUser:m.a,token:m.e,fetchingAvatar:m.d,error:m.b});t.default=Object(i.b)(p,(function(e){return{changeAvatarStart:function(t,a){return e(Object(u.b)(t,a))},removeAvatarStart:function(t){return e(Object(u.d)(t))},showModal:function(t,a){return e(Object(d.b)(t,a))},showAlert:function(t,a){return e(Object(f.a)(t,a))}}}))((function(e){var t=e.children,a=e.changeAvatarStart,n=e.removeAvatarStart,i=e.currentUser.avatar,l=e.showModal,u=e.showAlert,m=e.token,d=e.error,f=Object(o.useRef)();Object(o.useEffect)((function(){d&&u(d)}),[d,u]);var p=function(){var e=Object(c.a)(r.a.mark((function e(t,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,n(m);case 3:e.next=7;break;case 5:return e.next=7,a(t.target.files[0],m);case 7:d||u("Profile picture updated.");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return s.a.createElement(o.Fragment,null,s.a.createElement("label",{className:"color-blue font-bold heading-4",style:{cursor:"pointer",position:"relative"},onClick:function(e){return function(e){if(i)return e.preventDefault(),l({options:[{text:"Upload Photo",className:"color-blue font-bold",onClick:function(){f.current.click()}},{warning:!0,text:"Remove Current Photo",onClick:function(){p(null,!0)}}]},"OptionsDialog/OptionsDialog");f.current.click()}(e)}},s.a.createElement(o.Fragment,null,t||"Change Profile Photo")),s.a.createElement("input",{id:"avatar-upload",type:"file",accept:"image/*",style:{display:"none"},ref:f,onChange:function(e){return p(e)}}))}))},12:function(e,t,a){"use strict";t.a={SIGN_IN_START:"SIGN_IN_START",SIGN_IN_FAILURE:"SIGN_IN_FAILURE",SIGN_IN_SUCCESS:"SIGN_IN_SUCCESS",SIGN_OUT:"SIGN_OUT",SIGN_UP_START:"SIGN_UP_START",SIGN_UP_FAILURE:"SIGN_UP_FAILURE",GITHUB_SIGN_IN_START:"GITHUB_SIGN_IN_START",GITHUB_SIGN_IN_FAILURE:"GITHUB_SIGN_IN_FAILURE",GITHUB_SIGN_IN_SUCCESS:"GITHUB_SIGN_IN_SUCCESS",BOOKMARK_POST:"BOOKMARK_POST",CHANGE_AVATAR_START:"CHANGE_AVATAR_START",CHANGE_AVATAR_SUCCESS:"CHANGE_AVATAR_SUCCESS",CHANGE_AVATAR_FAILURE:"CHANGE_AVATAR_FAILURE",REMOVE_AVATAR_START:"REMOVE_AVATAR_START",REMOVE_AVATAR_SUCCESS:"REMOVE_AVATAR_SUCCESS",REMOVE_AVATAR_FAILURE:"REMOVE_AVATAR_FAILURE",UPDATE_PROFILE_START:"UPDATE_PROFILE_START",UPDATE_PROFILE_FAILURE:"UPDATE_PROFILE_FAILURE",UPDATE_PROFILE_SUCCESS:"UPDATE_PROFILE_SUCCESS"}},120:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(8),u=a(63),m=a(7),d=a(14),f=a.n(d),p=a(105),h=a.n(p),b=a(89),g=a(106),E=a.n(g),v=a(318),O=a.n(v),j=a(107),y=a(4),_=a(22),w=a(30),N=a(31),S=a(25),T=a(77),C=a(143);E()(b),O()(b);t.default=Object(l.b)(null,(function(e){return{hideModal:function(t){return e(Object(_.a)(t))},showModal:function(t,a){return e(Object(_.b)(t,a))},showAlert:function(t,a){return e(Object(w.a)(t,a))}}}))((function(e){var t=e.comment,a=e.caption,n=e.simple,l=e.post,d=e.token,p=e.currentUser,b=e.dialogDispatch,g=e.profileDispatch,E=e.showModal,v=e.hideModal,O=e.showAlert,_=Object(s.useRef)(),w=Object(s.useState)((function(){return Object(u.b)(a?l.date:t.date)})),k=Object(o.a)(w,2),I=k[0],x=k[1],A=Object(s.useState)(!1),R=Object(o.a)(A,2),P=R[0],F=R[1],D=a?t:t.author,U=l.commentReplies.filter((function(e){return e.parentComment===t._id})).sort((function(e,t){return new Date(e)-new Date(t)}))||[];Object(s.useEffect)((function(){var e=setInterval((function(){x(Object(u.b)(a?l.date:t.date))}),6e4);return function(){return clearInterval(e)}}),[x,a,t,l]);var M=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b&&b({type:"VOTE_COMMENT",payload:{commentId:t._id,currentUser:p}}),e.next=4,Object(N.g)(t._id,d);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O("Could not vote on the comment.",(function(){return M()}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.length!==t.commentReplies){e.next=4;break}F((function(e){return!e})),e.next=15;break;case 4:return e.prev=4,e.next=7,Object(N.e)(t._id,U.length>0?U.length:0);case 7:a=e.sent,b({type:"ADD_COMMENT_REPLY",payload:{comment:a,parentCommentId:t._id}}),!P&&F(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),O("Could not get the comment's replies.",(function(){return L()}));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b({type:"REMOVE_COMMENT",payload:t._id}),g&&g({type:"DECREMENT_POST_COMMENTS_COUNT",payload:{decrementCount:t.commentReplies?1+t.commentReplies:1,postId:l._id}}),e.next=5,Object(N.c)(t._id,d);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O("Could not delete comment.",(function(){return H()}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),V=f()({comment:!0,"comment--simple":n});return i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:V,ref:_},i.a.createElement(m.b,{onClick:function(){return v("PostDialog")},to:"/".concat(D.username)},i.a.createElement(S.default,{size:"4rem",imageSrc:D.avatar,className:"avatar--small"})),i.a.createElement("div",{className:"comment__content"},i.a.createElement("p",{className:"heading-4"},i.a.createElement(m.b,{onClick:function(){return v("PostDialog")},style:{textDecoration:"none",color:"currentColor",marginRight:"5px"},to:"/".concat(D.username)},i.a.createElement("b",null,D.username)),i.a.createElement(h.a,{options:j.a},t.message)),!a&&p&&D.username===p.username?i.a.createElement("div",{onClick:function(){return E({options:[{warning:!0,text:"Delete",onClick:function(){return H()}}]},"OptionsDialog/OptionsDialog")},className:"comment__menu-dots",style:{marginRight:"0"}},i.a.createElement(y.default,{className:"icon--small icon--button color-grey",icon:"ellipsis-horizontal",style:{height:"3rem"}})):null,i.a.createElement("div",{className:"comment__stats"},i.a.createElement("p",{className:"heading-5 color-light"},I),!a&&i.a.createElement(s.Fragment,null,t.commentVotes.length>0&&i.a.createElement("p",{className:"heading-5 color-light"},t.commentVotes.length," ",1===t.commentVotes.length?"like":"likes"),i.a.createElement("button",{onClick:function(){return b({type:"SET_REPLYING",payload:{username:t.author.username,commentId:t._id}})},className:"heading-5 heading--button color-light"},"reply"))),a&&l.commentData?i.a.createElement(m.b,{className:"heading-4 color-grey font-medium",style:{textDecoration:"none"},to:"/post/".concat(l._id)},"View all ",l.commentData.commentCount," comments"):null,b&&!a&&t.commentReplies>0?i.a.createElement("p",{onClick:function(){return L()},style:{display:"flex",alignItems:"center",marginTop:"1rem"},className:"heading-5 heading--button color-light"},i.a.createElement("span",{className:"dash mr-lg"}),U.length===t.commentReplies?P?"Hide replies":"View replies (".concat(t.commentReplies,")"):U.length<t.commentReplies?"View replies (".concat(t.commentReplies-U.length,")"):void 0):null),!a&&i.a.createElement("div",{className:"comment__like"},p?i.a.createElement(T.default,{toggle:!!t.commentVotes.find((function(e){return e.author===p._id})),constantProps:{onClick:function(){return M()}},toggledProps:[{icon:"heart",className:"icon--tiny color-red"},{icon:"heart-outline",className:"icon--tiny"}],elementRef:_}):i.a.createElement(y.default,{icon:"heart-outline",className:"icon--tiny"}))),P?U.map((function(e,a){return i.a.createElement(C.default,{comment:e,parentComment:t,post:l,token:d,currentUser:p,dialogDispatch:b,profileDispatch:g,showModal:E,hideModal:v,showAlert:O,key:a})})):null)}))},121:function(e,t,a){"use strict";a.r(t),a.d(t,"INITIAL_STATE",(function(){return c})),a.d(t,"usersListReducer",(function(){return o}));var n=a(15),r=a(1),c={fetching:!0,fetchingAdditional:!1,error:!1,data:null},o=function(e,t){switch(t.type){case"FETCH_START":return Object(r.a)(Object(r.a)({},e),{},{fetching:!0,error:!1});case"FETCH_ADDITIONAL_START":return Object(r.a)(Object(r.a)({},e),{},{fetching:!1,error:!1,fetchingAdditional:!0});case"FETCH_FAILURE":return Object(r.a)(Object(r.a)({},e),{},{fetching:!1,fetchingAdditional:!1,error:t.payload});case"FETCH_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{fetching:!1,fetchingAdditional:!1,error:!1,data:t.payload});case"ADD_USERS":return Object(r.a)(Object(r.a)({},e),{},{fetchingAdditional:!1,data:[].concat(Object(n.a)(e.data),Object(n.a)(t.payload))});default:throw new Error("Invalid action type '".concat(t.type,"' passed to followingOverviewReducer"))}}},122:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return f}));var n=a(2),r=a.n(n),c=a(3),o=a(43),s=a(10),i=a.n(s),l=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:0,e.prev=1,e.next=4,i.a.get("/api/post/feed/".concat(a),{headers:{authorization:t}});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:o.a.FETCH_POSTS_START}),a.next=4,l(e,t);case 4:c=a.sent,n({type:o.a.FETCH_POSTS_SUCCESS,payload:c}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:o.a.FETCH_POSTS_FAILURE,payload:a.t0.message});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},m=function(e){return{type:o.a.ADD_POST,payload:e}},d=function(e){return{type:o.a.REMOVE_POST,payload:e}},f=function(){return{type:o.a.CLEAR_POSTS}}},125:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),c=a.n(r),o=a(8),s=a(9),i=a(7),l=a(36),u=a(11),m=a(18),d=a(23),f=a(53),p=a(16),h=a(100),b=a(101),g=a(52),E=Object(s.b)({error:u.b,fetching:u.c,currentUser:u.a});t.default=Object(o.b)(E,(function(e){return{signInStart:function(t,a){return e(Object(l.e)(t,a))}}}))((function(e){var t=e.signInStart,a=e.error,o=e.fetching,s=e.currentUser,l=e.onClick,u=e.modal,E=Object(r.useState)(""),v=Object(n.a)(E,2),O=v[0],j=v[1],y=Object(r.useState)(""),_=Object(n.a)(y,2),w=_[0],N=_[1];return s&&l(),c.a.createElement("div",{className:"login-card-container",style:u?{padding:"2rem"}:{}},c.a.createElement(g.default,{className:"form-card"},c.a.createElement("h1",{className:"heading-logo text-center"},"Timcha"),c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(O,w)}(e)},className:"form-card__form"},c.a.createElement(d.default,{placeholder:"Username or email address",type:"text",onChange:function(e){return j(e.target.value)},required:!0}),c.a.createElement(d.default,{placeholder:"Password",type:"password",onChange:function(e){return N(e.target.value)},required:!0}),c.a.createElement(m.default,{disabled:o,loading:o},"Log In")),c.a.createElement(f.default,null,"OR"),c.a.createElement(b.default,null),a&&c.a.createElement("p",{style:{padding:"1rem 0"},className:"error"},a),c.a.createElement(p.default,{style:{marginTop:"1.5rem"},darkBlue:!0,small:!0},"Forgot password?")),c.a.createElement(g.default,null,c.a.createElement("section",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem"}},c.a.createElement("h4",{style:{marginRight:"5px"},className:"heading-4 font-thin"},"Don't have an account?"),c.a.createElement(i.b,{to:"/signup",onClick:function(){return l&&l()}},c.a.createElement(p.default,{medium:!0,blue:!0,bold:!0},"Sign up")))),c.a.createElement(h.default,null))}))},130:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(0),s=a.n(o),i=a(8),l=a(9),u=a(7),m=a(111),d=a(11),f=a(79),p=a(41),h=a(54),b=a(4),g=a(69),E=a(53),v=a(105),O=a.n(v),j=a(89),y=a(106),_=a.n(y),w=a(107);_()(j);var N=Object(l.b)({notifications:m.b,notificationState:m.a,token:d.e});t.default=Object(i.b)(N,(function(e){return{fetchNotificationsStart:function(t){return e(Object(f.c)(t))},readNotificationsStart:function(t){return e(Object(f.d)(t))},clearNotifications:function(){return e(Object(f.b)())}}}))((function(e){var t=e.notifications,a=e.fetchNotificationsStart,n=e.readNotificationsStart,i=e.notificationState,l=e.clearNotifications,m=e.setShowNotifications,d=e.token;return Object(o.useEffect)((function(){return Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(d);case 2:return e.next=4,n(d);case 4:case"end":return e.stop()}}),e)})))(),function(){l()}}),[a,n,l,d]),s.a.createElement(o.Fragment,null,i.fetching?s.a.createElement(h.default,{style:{height:"7rem"}}):t.length>0?t.map((function(e,a){var n={username:e.sender.username,avatar:e.sender.avatar,subTextDark:!0,token:d,date:e.date,style:{minHeight:"7rem",padding:"1rem 1.5rem"}},r=null;switch(e.notificationType){case"follow":n.subText="started following you.",r=s.a.createElement(g.default,{username:e.sender.username,avatar:e.sender.avatar,following:e.isFollowing,userId:e.sender._id});break;case"like":n.subText="liked your photo.",r=s.a.createElement(u.b,{to:"/post/".concat(e.notificationData.postId)},s.a.createElement("img",{src:e.notificationData.image,style:{display:"flex",filter:e.notificationData.filter},onClick:function(){return m&&m(!1)},alt:"liked post"}));break;default:n.subText=s.a.createElement(O.a,{options:w.a},"".concat("comment"===e.notificationType?"commented:":"mentioned you in a comment:"," ").concat(e.notificationData.message)),r=s.a.createElement(u.b,{to:"/post/".concat(e.notificationData.postId)},s.a.createElement("img",{src:e.notificationData.image,style:{display:"flex",filter:e.notificationData.filter},onClick:function(){return m&&m(!1)},alt:"post commented on"}))}return s.a.createElement("li",{key:a},s.a.createElement(p.default,n,r&&r),t.length-1>a&&s.a.createElement(E.default,null))})):s.a.createElement("div",{className:"popup-card__empty"},s.a.createElement(b.default,{className:"icon--larger",icon:"heart-circle-outline"}),s.a.createElement("h2",{className:"heading-2 font-medium"},"Activity On Your Posts"),s.a.createElement("h4",{className:"heading-4 font-medium"},"When someone likes or comments on your posts, you'll see them here.")))}))},131:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25);t.default=function(e){var t=e.avatar,a=e.username;return r.a.createElement("div",{className:"unfollow-prompt"},r.a.createElement(c.default,{style:{width:"10rem",height:"10rem"},imageSrc:t}),r.a.createElement("p",{style:{marginTop:"3rem"},className:"heading-4"},"Unfollow @".concat(a,"?")))}},139:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),c=a.n(r),o=a(8),s=a(9),i=a(7),l=a(14),u=a.n(l),m=a(24),d=a(11),f=a(58),p=a(154),h=a(96),b=a(91),g=a(98),E=a(18),v=a(4),O=Object(r.memo)((function(e){var t=e.currentUser,a=Object(r.useState)(!1),o=Object(n.a)(a,2),s=o[0],l=o[1],d=Object(m.g)().location.pathname;Object(f.a)((function(e){var t=e.currentScrollPosition;window.outerWidth>600&&l(t>100)}));var O=u()({header:!0,"header--small":s});return c.a.createElement("header",{className:O},c.a.createElement("div",{className:"header__content"},c.a.createElement(i.b,{to:"/",className:"header__logo"},c.a.createElement("div",{className:"header__logo-image"},c.a.createElement(p.a,null)),c.a.createElement("div",{className:"header__logo-header"},c.a.createElement("h3",{className:"heading-logo"},"Timcha"))),c.a.createElement(h.default,null),c.a.createElement("div",{className:"header__icons"},t?c.a.createElement(r.Fragment,null,c.a.createElement(i.b,{to:"/explore"},c.a.createElement(v.default,{icon:"/explore"===d?"compass":"compass-outline"})),c.a.createElement(g.default,null),c.a.createElement(i.b,{to:"/"+t.username},c.a.createElement(v.default,{icon:d==="/"+t.username?"person-circle":"person-circle-outline"})),c.a.createElement(b.default,null)):c.a.createElement(r.Fragment,null,c.a.createElement(i.b,{style:{marginRight:"1rem"},to:"/login"},c.a.createElement(E.default,null,"Log In")),c.a.createElement(i.b,{to:"/signup"},c.a.createElement("h3",{className:"heading-3 heading--button color-blue"},"Sign Up"))))))}));O.whyDidYouRender=!0;var j=Object(s.b)({currentUser:d.a});t.default=Object(o.b)(j)(O)},140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),o=a(4);t.default=function(e){var t=e.style,a=e.notifications,n=0,s=0,i=0;a.forEach((function(e){if(!e.read)switch(e.notificationType){case"follow":n+=1;break;case"comment":case"mention":i+=1;break;default:s+=1}}));var l=function(e,t){return r.a.createElement("div",null,r.a.createElement(o.default,{className:"icon--small",icon:e}),r.a.createElement("span",null,t))};return r.a.createElement(c.a.div,{className:"notification-button__popup",style:t},n>0&&l("person",n),s>0&&l("heart",s),i>0&&l("chatbubble",i))}},141:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a(0),c=a.n(r),o=a(8),s=a(85),i=a.n(s),l=a(22),u=Object(r.memo)((function(e){var t=e.component,o=e.hideModal,s=Object(n.a)(e,["component","hideModal"]),l=document.querySelector("#modal-root"),u=document.createElement("div"),m=a(396)("./".concat(t)).default;return u.className="modal grid",Object(r.useEffect)((function(){var e=function(e){var a=e.target;a!==u&&u.contains(a)||o(t)};return u.addEventListener("mousedown",e,!1),l.appendChild(u),function(){u.removeEventListener("mousedown",e,!1),l.removeChild(u)}}),[u,l,o,t]),i.a.createPortal(c.a.createElement(m,Object.assign({hide:function(){return o(t)}},s)),u)}));u.whyDidYouRender=!0;t.default=Object(o.b)(null,(function(e){return{hideModal:function(t){return e(Object(l.a)(t))}}}))(u)},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),o=a(16);t.default=function(e){var t=e.children,a=e.onClick,n=e.style;return r.a.createElement(c.a.div,{style:n,className:"alert"},r.a.createElement("h3",{style:{color:"white"},className:"heading-3 font-medium"},t),a&&r.a.createElement(o.default,{onClick:a,blue:!0,bold:!0},"Retry"))}},143:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(63),u=a(7),m=a(105),d=a.n(m),f=a(89),p=a(106),h=a.n(p),b=a(107),g=a(4),E=a(31),v=a(25),O=a(77);h()(f);t.default=function(e){var t=e.comment,a=e.parentComment,n=e.post,m=e.token,f=e.currentUser,p=e.dialogDispatch,h=e.profileDispatch,j=e.showModal,y=e.hideModal,_=e.showAlert,w=Object(s.useRef)(),N=Object(s.useState)((function(){return Object(l.b)(t.date)})),S=Object(o.a)(N,2),T=S[0],C=S[1];Object(s.useEffect)((function(){var e=setInterval((function(){C(Object(l.b)(t.date))}),6e4);return function(){return clearInterval(e)}}),[C,t]);var k=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p({type:"VOTE_COMMENT_REPLY",payload:{commentReplyId:t._id,currentUser:f}}),e.next=4,Object(E.h)(t._id,m);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),_("Could not vote on the comment.",(function(){return k()}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p({type:"REMOVE_COMMENT_REPLY",payload:{commentReplyId:t._id,parentCommentId:a._id}}),h&&h({type:"DECREMENT_POST_COMMENTS_COUNT",payload:{decrementCount:1,postId:n._id}}),e.next=5,Object(E.d)(t._id,m);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_("Could not get the comment's replies.",(function(){return I()}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{style:{marginLeft:"5rem"},className:"comment",ref:w},i.a.createElement(u.b,{onClick:function(){return y("PostDialog")},to:"/".concat(t.author.username)},i.a.createElement(v.default,{size:"4rem",imageSrc:t.author.avatar,className:"avatar--small"})),i.a.createElement("div",{className:"comment__content"},i.a.createElement("p",{className:"heading-4"},i.a.createElement(u.b,{onClick:function(){return y("PostDialog")},style:{textDecoration:"none",color:"currentColor",marginRight:"5px"},to:"/".concat(t.author.username)},i.a.createElement("b",null,t.author.username)),i.a.createElement(d.a,{options:b.a},t.message)),f&&t.author.username===f.username?i.a.createElement("div",{onClick:function(){return j({options:[{warning:!0,text:"Delete",onClick:function(){return I()}}]},"OptionsDialog/OptionsDialog")},className:"comment__menu-dots",style:{marginRight:"0"}},i.a.createElement(g.default,{className:"icon--small icon--button color-grey",icon:"ellipsis-horizontal",style:{height:"3rem"}})):null,i.a.createElement("div",{className:"comment__stats"},i.a.createElement("p",{className:"heading-5 color-light"},T),i.a.createElement(s.Fragment,null,t.commentReplyVotes.length>0&&i.a.createElement("p",{className:"heading-5 color-light"},t.commentReplyVotes.length," ",1===t.commentReplyVotes.length?"like":"likes"),i.a.createElement("button",{onClick:function(){return p({type:"SET_REPLYING",payload:{username:t.author.username,commentId:a._id}})},className:"heading-5 heading--button color-light"},"reply")))),i.a.createElement("div",{className:"comment__like"},f?i.a.createElement(O.default,{toggle:!!t.commentReplyVotes.find((function(e){return e.author===f._id})),constantProps:{onClick:function(){return k()}},toggledProps:[{icon:"heart",className:"icon--tiny color-red"},{icon:"heart-outline",className:"icon--tiny"}],elementRef:w}):i.a.createElement(g.default,{icon:"heart-outline",className:"icon--tiny"})))}},144:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a(0),c=a.n(r);t.default=function(e){var t=e.children,a=e.fieldProps,r=Object(n.a)(e,["children","fieldProps"]);return c.a.createElement("textarea",Object.assign({className:"form-group__textarea"},a,r),t)}},145:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(15),o=a(3),s=a(5),i=a(0),l=a.n(i),u=a(58),m=a(59),d=a(54),f=a(41);t.default=function(e){var t=e.fetching,a=e.result,n=e.onClick,p=e.username,h=Object(i.useState)([]),b=Object(s.a)(h,2),g=b[0],E=b[1],v=Object(i.useState)(!1),O=Object(s.a)(v,2),j=O[0],y=O[1],_=Object(i.useState)(!1),w=Object(s.a)(_,2),N=w[0],S=w[1],T=Object(i.useRef)();Object(i.useEffect)((function(){10!==a.length||j||y(!0)}),[a,j]),Object(u.a)(function(){var e=Object(o.a)(r.a.mark((function e(n){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.atBottom||!j||t||N){e.next=16;break}return e.prev=2,S(!0),e.next=6,Object(m.e)(p,a.length+g.length);case 6:10!==(o=e.sent).length&&y(!1),E((function(e){return[].concat(Object(c.a)(e),Object(c.a)(o))})),S(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),S(!1),y(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),T.current,[j,t,N]);var C=function(e,t){return l.a.createElement("li",{key:t},l.a.createElement(f.default,{username:e.username,avatar:e.avatar,subText:e.fullName,onClick:function(){return n(e)}}))};return l.a.createElement("ul",{ref:T,className:"search-suggestion"},t?l.a.createElement(d.default,null):a.map((function(e,t){return C(e,t)})),N?l.a.createElement(d.default,null):g.map((function(e,t){return C(e,t)})))}},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(53),o=a(4);t.default=function(){return r.a.createElement("div",{className:"feed__bottom"},r.a.createElement(c.default,null,r.a.createElement(o.default,{icon:"checkmark-circle-outline",className:"feed__bottom-icon icon--larger"})),r.a.createElement("h2",{className:"heading-2"},"You're All Caught Up"),r.a.createElement("h3",{className:"heading-3 color-grey"},"Follow more people to see more posts."))}},147:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),c=a.n(r),o=a(14),s=a.n(o),i=a(51),l=a(27);t.default=function(e){var t=e.setFilter,a=e.filters,o=e.previewImage,u=Object(r.useRef)(),m=Object(r.useState)("Normal"),d=Object(n.a)(m,2),f=d[0],p=d[1],h=function(e,a){p(e),t(a,e)};return c.a.createElement("ul",{ref:u,className:"filter-selector"},0===a.length?c.a.createElement(i.default,null):o?c.a.createElement(r.Fragment,null,c.a.createElement("li",{className:s()({"filter-selector__item":!0,"filter-selector__item--active font-bold":"Normal"===f}),onClick:function(){return h("Normal","")}},c.a.createElement("span",{className:"filter-selector__filter-name heading-5"},"Normal"),c.a.createElement("img",{src:o,alt:"Filter preview"})),a.map((function(e,t){var a=e.name,n=e.filter;return c.a.createElement("li",{className:s()({"filter-selector__item":!0,"filter-selector__item--active font-bold":f===a}),onClick:function(){return h(a,n)},key:t},c.a.createElement("span",{className:"filter-selector__filter-name heading-5"},a),c.a.createElement("img",{src:o,style:{filter:n},alt:"Filter preview"}))}))):function(e){for(var t=[],a=0;a<e;a++)t.push(c.a.createElement("li",{className:"filter-selector__item",style:{width:"12rem",height:"8rem"},key:a},c.a.createElement(l.default,{animated:!0})));return t}(10))}},148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a(4),s=a(18),i=function(){return r.a.createElement("a",{style:{textDecoration:"none"},href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(s.default,{style:{color:"#999",padding:"0px",border:"0px",marginLeft:"15px"},inverted:!0},"\u7cb5ICP\u509920012196\u865f"))},l=function(){return r.a.createElement("a",{style:{textDecoration:"none"},href:"https://art.timcha.net/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(s.default,{style:{color:"#999",padding:"0px",border:"0px",marginLeft:"15px"},inverted:!0},"\u5f69\u86cb"))};t.default=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer__left"},r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"ABOUT"),r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"HELP"),r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"PRESS"),r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"API"),r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"JOBS"),r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"PRIVACY"),r.a.createElement(c.default,{bold:!0,small:!0,darkBlue:!0},"TERMS")),r.a.createElement("div",{className:"footer__right"},r.a.createElement("h4",{className:"heading-4 color-grey font-bold",style:{display:"flex",alignItems:"center"}},"@2021"," ",r.a.createElement(o.default,{className:"icon--small color-grey",icon:"heart",style:{display:"inline-block",margin:"0 5px"}})," ","\u751c\u8336",r.a.createElement(l,null),r.a.createElement(i,null))))}},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a(7),s=a(4),i=a(98),l=a(91);t.default=function(e){var t=e.currentUser,a=Object(c.g)().location.pathname;return r.a.createElement("nav",{className:"mobile-nav"},r.a.createElement("ul",{className:"mobile-nav__list"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},r.a.createElement(s.default,{icon:"/"===a?"home":"home-outline"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/explore"},r.a.createElement(s.default,{icon:"/explore"===a?"search":"search-outline"}))),r.a.createElement("li",null,r.a.createElement(l.default,{plusIcon:!0})),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/activity"},r.a.createElement(i.default,{mobile:!0,icon:"/activity"===a?"heart":"heart-outline"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/".concat(t.username)},r.a.createElement(s.default,{icon:a==="/".concat(t.username)?"person-circle":"person-circle-outline"})))))}},150:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(8),u=a(9),m=a(24),d=a(11),f=a(30),p=a(122),h=a(37),b=a(25),g=a(57),E=a(4),v=a(16),O=a(51),j=Object(u.b)({token:d.e,currentUser:d.a});t.default=Object(l.b)(j,(function(e){return{showAlert:function(t,a){return e(Object(f.a)(t,a))},addPost:function(t){return e(Object(p.a)(t))}}}))((function(e){var t=e.token,n=e.file,l=e.previewImage,u=e.currentUser,d=e.hide,f=e.back,p=e.showAlert,j=e.addPost,y=Object(s.useState)(""),_=Object(o.a)(y,2),w=_[0],N=_[1],S=Object(s.useState)(!1),T=Object(o.a)(S,2),C=T[0],k=T[1],I=Object(m.g)(),x=function(){var e=Object(c.a)(r.a.mark((function e(a){var c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),(c=new FormData).append("image",n),c.set("caption",w),c.set("crop",JSON.stringify(l.crop)),l.filterName&&c.set("filter",l.filterName),e.prev=6,k(!0),e.next=10,Object(h.b)(c,t);case 10:o=e.sent,k(!1),d(),"/"===I.location.pathname?j(o):I.push("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),k(!1),p(e.t0.message||"Could not share post.",(function(){return x(a)}));case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(s.Fragment,null,C&&i.a.createElement(O.default,null),i.a.createElement(g.default,{show:!0},i.a.createElement(E.default,{icon:"chevron-back",onClick:function(){return f()},style:{cursor:"pointer"}}),i.a.createElement("h3",{className:"heading-3"},"New Post"),i.a.createElement(v.default,{bold:!0,blue:!0,style:{fontSize:"1.5rem"},onClick:function(e){return x(e)}},"Share")),i.a.createElement("form",{style:n&&{display:"block"},className:"new-post__form post-form"},i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"post-form__input"},i.a.createElement("div",{className:"post-form__avatar"},i.a.createElement(b.default,{size:"3rem",className:"avatar--small",imageSrc:u.avatar?u.avatar:a(235).default})),i.a.createElement("textarea",{className:"post-form__textarea",placeholder:"Write a caption...",onChange:function(e){return N(e.target.value)}}),i.a.createElement("div",{className:"post-form__preview"},i.a.createElement("img",{src:l.src,alt:"Preview",style:{filter:l.filter}}))))))}))},151:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(147),s=a(27);t.default=function(e){var t=e.previewImage,a=e.setPreviewImage,i=e.filters;return c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"new-post__preview"},c.a.createElement("div",{className:"new-post__preview-image-container"},t.src?c.a.createElement("img",{src:t.src,alt:"Customize",style:{width:"100%",height:"100%",objectFit:"contain",filter:t.filter}}):c.a.createElement(s.default,null))),c.a.createElement(o.default,{setFilter:function(e,t){return a((function(a){return Object(n.a)(Object(n.a)({},a),{},{filter:e,filterName:t})}))},previewImage:t.src,filters:i}))}},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a(25);t.default=function(e){var t=e.avatar,a=e.username,s=e.fullName,i=e.posts,l=e.children,u=Object(c.g)();return r.a.createElement("div",{className:"suggestion-card"},r.a.createElement(o.default,{onClick:function(){return u.push("/"+a)},className:"avatar--large mb-sm",imageSrc:t}),r.a.createElement("h4",{className:"heading-4 font-bold"},a),r.a.createElement("h4",{className:"heading-4 color-grey font-medium"},s),r.a.createElement("div",{className:"suggestion-card__content"},i.length>0?i.map((function(e,t){return r.a.createElement("figure",{className:"suggestion-card__image-container",key:t},r.a.createElement("img",{src:e.thumbnail,alt:"User post",style:{filter:e.filter}}))})):r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("h3",{className:"heading-4 font-bold"},"No Posts"),r.a.createElement("h4",{className:"heading-5 font-medium color-grey"},"This user has no posts yet, follow them to see their future posts.")))),r.a.createElement("div",{className:"suggestion-card__footer"},r.a.createElement("h5",{className:"heading-5 color-grey font-medium"},"Random"),l))}},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n,r,c=a(0);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function i(e,t){var a=e.title,i=e.titleId,l=s(e,["title","titleId"]);return c.createElement("svg",o({id:"\\u56FE\\u5C42_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 48 48",style:{enableBackground:"new 0 0 48 48"},xmlSpace:"preserve",ref:t,"aria-labelledby":i},l),a?c.createElement("title",{id:i},a):null,n||(n=c.createElement("style",{type:"text/css"},"\r\n\t.st0{fill:#0095F6;}\r\n")),r||(r=c.createElement("g",{id:"Icons"},c.createElement("g",{id:"Icons_8_"},c.createElement("g",null,c.createElement("path",{className:"st0",d:"M24,1C11.3,1,1,11.3,1,24s10.3,23,23,23c12.7,0,23-10.3,23-23S36.7,1,24,1z M22.3,30.4h8.3 c1.6,0,2.8,1.3,2.8,2.8S32.1,36,30.6,36h-8.3c-4.2,0-7.6-3.4-7.6-7.6V14.8c0-1.5,1.3-2.8,2.8-2.8c1.6,0,2.8,1.2,2.8,2.8v3.3h10.3 c1.6,0,2.8,1.3,2.8,2.8c0,1.5-1.2,2.8-2.8,2.8H20.2v4.7C20.2,29.5,21.1,30.4,22.3,30.4z"}))))))}var l=c.forwardRef(i);a.p},155:function(e,t,a){"use strict";var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a(193),l=a.n(i),u=a(59);t.a=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(s.useState)(!1),m=Object(o.a)(i,2),d=m[0],f=m[1],p=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return f(!1),e.abrupt("return",n([]));case 3:return e.prev=3,e.next=6,Object(u.e)(t,a);case 6:c=e.sent,n(c||[]),f(!1),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(3),f(!1),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}(),h=l()(p,500);return{handleSearchDebouncedRef:Object(s.useRef)((function(e,t){return h(e,t)})).current,result:a,setResult:n,fetching:d,setFetching:f}}},156:function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var n=a(62),r=(a(512),a(317)),c=a(161),o=[r.a];var s=Object(n.d)(c.a,n.a.apply(void 0,o));t.a=s},16:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a(0),c=a.n(r),o=a(14),s=a.n(o);t.default=function(e){var t=e.children,a=e.blue,r=e.darkBlue,o=e.bold,i=e.large,l=e.medium,u=e.small,m=Object(n.a)(e,["children","blue","darkBlue","bold","large","medium","small"]),d=s()({"text-button":!0,"heading-3":i,"heading-4":l,"heading-5":u,"color-blue":a,"color-blue-2":r,"font-bold":o});return c.a.createElement("button",Object.assign({},m,{className:d}),t)}},161:function(e,t,a){"use strict";var n=a(62),r=a(55),c=a(1),o=a(12),s={currentUser:null,error:!1,fetching:!1,fetchingAvatar:!1,updatingProfile:!1,token:localStorage.getItem("token")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.a.GITHUB_SIGN_IN_START:case o.a.SIGN_UP_START:case o.a.SIGN_IN_START:return Object(c.a)(Object(c.a)({},e),{},{error:!1,fetching:!0});case o.a.GITHUB_SIGN_IN_SUCCESS:case o.a.SIGN_IN_SUCCESS:return Object(c.a)(Object(c.a)({},e),{},{currentUser:t.payload.user,error:!1,fetching:!1,token:t.payload.token});case o.a.GITHUB_SIGN_IN_FAILURE:case o.a.SIGN_UP_FAILURE:case o.a.SIGN_IN_FAILURE:return Object(c.a)(Object(c.a)({},e),{},{fetching:!1,error:t.payload});case o.a.SIGN_OUT:return Object(c.a)(Object(c.a)({},e),{},{currentUser:null,token:null});case o.a.BOOKMARK_POST:var a=t.payload,n=a.operation,i=a.postId,l=JSON.parse(JSON.stringify(e.currentUser.bookmarks));return"add"===n?l.push({post:i}):l=l.filter((function(e){return e.post!==i})),Object(c.a)(Object(c.a)({},e),{},{currentUser:Object(c.a)(Object(c.a)({},e.currentUser),{},{bookmarks:l})});case o.a.REMOVE_AVATAR_START:case o.a.CHANGE_AVATAR_START:return Object(c.a)(Object(c.a)({},e),{},{fetchingAvatar:!0});case o.a.CHANGE_AVATAR_SUCCESS:return Object(c.a)(Object(c.a)({},e),{},{currentUser:Object(c.a)(Object(c.a)({},e.currentUser),{},{avatar:t.payload}),fetchingAvatar:!1});case o.a.REMOVE_AVATAR_FAILURE:case o.a.CHANGE_AVATAR_FAILURE:return Object(c.a)(Object(c.a)({},e),{},{fetchingAvatar:!1,error:t.payload});case o.a.REMOVE_AVATAR_SUCCESS:var u=e.currentUser,m=(u.avatar,Object(r.a)(u,["avatar"]));return Object(c.a)(Object(c.a)({},e),{},{currentUser:Object(c.a)({},m),fetchingAvatar:!1,error:!1});case o.a.UPDATE_PROFILE_START:return Object(c.a)(Object(c.a)({},e),{},{updatingProfile:!0});case o.a.UPDATE_PROFILE_SUCCESS:return Object(c.a)(Object(c.a)({},e),{},{error:!1,updatingProfile:!1,currentUser:Object(c.a)(Object(c.a)({},e.currentUser),t.payload)});case o.a.UPDATE_PROFILE_FAILURE:return Object(c.a)(Object(c.a)({},e),{},{updatingProfile:!1,error:t.payload});default:return e}},l=a(15),u=a(110),m={modals:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.HIDE_MODAL:var a=e.modals,n=a.filter((function(e){return e.component!==t.payload}));return{modals:n};case u.a.SHOW_MODAL:var r=t.payload,c=r.props,o=r.component;return{modals:[].concat(Object(l.a)(e.modals),[{props:c,component:o}])};default:return e}},f=a(65),p={text:"",onClick:null,showAlert:!1,timeoutId:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a.SHOW_ALERT:var a=t.payload,n=a.text,r=a.onClick;return Object(c.a)(Object(c.a)({},e),{},{text:n,onClick:r,showAlert:!0});case f.a.HIDE_ALERT:return Object(c.a)(Object(c.a)({},e),{},{text:"",onClick:null,showAlert:!1});case f.a.SET_ALERT_TIMEOUT_ID:return Object(c.a)(Object(c.a)({},e),{},{timeoutId:t.payload});default:return e}},b=a(108),g={socket:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.a.CONNECT:return Object(c.a)(Object(c.a)({},e),{},{socket:t.payload});case b.a.DISCONNECT:return e.socket&&e.socket.disconnect(),g;default:return e}},v=a(42),O={notifications:[],unreadCount:0,fetching:!1,error:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.a.ADD_NOTIFICATION:return Object(c.a)(Object(c.a)({},e),{},{notifications:[t.payload].concat(Object(l.a)(e.notifications)),unreadCount:e.unreadCount+1});case v.a.FETCH_NOTIFICATIONS_START:return Object(c.a)(Object(c.a)({},e),{},{fetching:!0,error:!1});case v.a.FETCH_NOTIFICATIONS_FAILURE:return Object(c.a)(Object(c.a)({},e),{},{fetching:!1,error:t.payload});case v.a.FETCH_NOTIFICATIONS_SUCCESS:var a=t.payload.filter((function(e){return!1===e.read})).length;return Object(c.a)(Object(c.a)({},e),{},{fetching:!1,error:!1,notifications:t.payload,unreadCount:a});case v.a.READ_NOTIFICATIONS:var n=JSON.parse(JSON.stringify(e.notifications));return n.forEach((function(e){return e.read=!0})),Object(c.a)(Object(c.a)({},e),{},{unreadCount:0,notifications:n});case v.a.CLEAR_NOTIFICATIONS:return Object(c.a)(Object(c.a)({},e),{},{unreadCount:0,notifications:[]});default:return e}},y=a(43),_={posts:[],fetching:!0,error:!1,hasMore:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.a.FETCH_POSTS_START:return Object(c.a)(Object(c.a)({},e),{},{fetching:!0,error:!1});case y.a.FETCH_POSTS_SUCCESS:return Object(c.a)(Object(c.a)({},e),{},{fetching:!1,error:!1,posts:[].concat(Object(l.a)(e.posts),Object(l.a)(t.payload)),hasMore:5===t.payload.length});case y.a.FETCH_POSTS_FAILURE:return Object(c.a)(Object(c.a)({},e),{},{fetching:!1,error:t.payload});case y.a.ADD_POST:return Object(c.a)(Object(c.a)({},e),{},{posts:[t.payload].concat(Object(l.a)(e.posts))});case y.a.REMOVE_POST:var a=JSON.parse(JSON.stringify(e.posts)),n=a.findIndex((function(e){return e._id===t.payload}));return n&&a.splice(n,1),Object(c.a)(Object(c.a)({},e),{},{posts:a});case y.a.CLEAR_POSTS:return Object(c.a)(Object(c.a)({},e),{},{posts:[]});default:return e}},N=Object(n.c)({user:i,modal:d,alert:h,socket:E,notifications:j,feed:w});t.a=N},162:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a(108),r=a(313),c=a.n(r),o=a(79),s=a(122),i=function(){return function(e){var t=c()({query:{token:localStorage.getItem("token")}});e({type:n.a.CONNECT,payload:t}),t.on("newNotification",(function(t){e(Object(o.a)(t))})),t.on("newPost",(function(t){e(Object(s.a)(t))})),t.on("deletePost",(function(t){e(Object(s.d)(t))}))}},l=function(){return{type:n.a.DISCONNECT}}},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),s=a(51);t.default=function(e){var t=e.children,a=e.onClick,n=e.inverted,c=e.style,i=e.disabled,l=e.loading,u=o()({button:!0,"button--inverted":n,"button--disabled":i});return r.a.createElement("button",{style:c,className:u,onClick:l?function(){}:a,type:i?"button":"submit"},l&&r.a.createElement(s.default,null),t)}},194:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return s}));var n=a(9),r=function(e){return e.feed},c=Object(n.a)([r],(function(e){return e.posts})),o=(Object(n.a)([r],(function(e){return e.error})),Object(n.a)([r],(function(e){return e.fetching}))),s=Object(n.a)([r],(function(e){return e.hasMore}))},198:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a(24),s=a(22),i=a(36),l=a(4);t.default=Object(c.b)(null,(function(e){return{showModal:function(t,a){return e(Object(s.b)(t,a))},signOut:function(){return e(Object(i.f)())}}}))((function(e){var t=e.showModal,a=e.signOut,n=Object(o.g)();return r.a.createElement(l.default,{icon:"aperture-outline",style:{cursor:"pointer"},onClick:function(){t({options:[{text:"Change Password",onClick:function(){return n.push("/settings/password")}},{text:"Log Out",onClick:function(){a(),n.push("/")}}]},"OptionsDialog/OptionsDialog")}})}))},199:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(8),u=a(9),m=a(11),d=a(30),f=a(49),p=a(109),h=a(25),b=a(23),g=a(18),E=a(16),v=a(99),O=a(32),j=Object(u.b)({currentUser:m.a,token:m.e});t.default=Object(l.b)(j,(function(e){return{showAlert:function(t,a){return e(Object(d.a)(t,a))}}}))((function(e){var t=e.currentUser,a=e.token,n=e.showAlert,l=Object(s.useState)(""),u=Object(o.a)(l,2),m=u[0],d=u[1],j=Object(s.useState)(""),y=Object(o.a)(j,2),_=y[0],w=y[1],N=Object(s.useState)(""),S=Object(o.a)(N,2),T=S[0],C=S[1],k=Object(s.useState)(!1),I=Object(o.a)(k,2),x=I[0],A=I[1];Object(s.useEffect)((function(){document.title="Change Password \u2022 Timcha"}),[]);var R=function(){var e=Object(c.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),_===T){e.next=3;break}return e.abrupt("return",n("Please make sure both passwords match."));case 3:if(!(c=Object(f.d)(_))){e.next=6;break}return e.abrupt("return",n(c));case 6:return e.prev=6,A(!0),e.next=10,Object(p.a)(m,_,a);case 10:n("Your password has been changed, you'll have to log in with the new one next time."),A(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),A(!1),n(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(v.default,{onSubmit:function(e){return R(e)}},i.a.createElement(O.default,null,i.a.createElement(h.default,{className:"avatar--small",imageSrc:t.avatar}),i.a.createElement("h1",{className:"font-medium",style:{fontSize:"2.5rem"}},t.username)),i.a.createElement(O.default,null,i.a.createElement("label",{className:"heading-3 font-bold"},"Old Password"),i.a.createElement(b.default,{onChange:function(e){return d(e.target.value)},type:"password"})),i.a.createElement(O.default,null,i.a.createElement("label",{className:"heading-3 font-bold"},"New Password"),i.a.createElement(b.default,{onChange:function(e){return w(e.target.value)},type:"password"})),i.a.createElement(O.default,null,i.a.createElement("label",{className:"heading-3 font-bold"},"Confirm New Password"),i.a.createElement(b.default,{onChange:function(e){return C(e.target.value)},type:"password"})),i.a.createElement(O.default,null,i.a.createElement("label",null),i.a.createElement(g.default,{style:{width:"15rem"},loading:x,disabled:m.length<6||_.length<6||T.length<6},"Change Password")),i.a.createElement(O.default,null,i.a.createElement("label",null),i.a.createElement(E.default,{style:{width:"15rem",textAlign:"left"},blue:!0,bold:!0},"Forgot Password?")))}))},200:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(0),s=a.n(o),i=a(8),l=a(159),u=a(9),m=a(11),d=a(36),f=a(30),p=a(49),h=a(25),b=a(23),g=a(144),E=a(18),v=a(99),O=a(32),j=a(119),y=Object(u.b)({currentUser:m.a,token:m.e,updatingProfile:m.f});t.default=Object(i.b)(y,(function(e){return{updateProfileStart:function(t,a){return e(Object(d.h)(t,a))},showAlert:function(t,a){return e(Object(f.a)(t,a))}}}))((function(e){var t=e.currentUser,a=e.showAlert,n=e.token,i=e.updateProfileStart,u=e.updatingProfile,m=Object(l.a)({initialValues:{email:t.email,fullName:t.fullName,username:t.username,bio:t.bio||"",website:t.website||""},validate:function(e){var t={},a=Object(p.b)(e.email);a&&(t.email=a);var n=Object(p.c)(e.fullName);n&&(t.fullName=n);var r=Object(p.e)(e.username);r&&(t.username=r);var c=Object(p.a)(e.bio);c&&(t.bio=c);var o=Object(p.f)(e.website);return o&&(t.website=o),t},onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n,t);case 2:a("Profile saved.");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(o.useEffect)((function(){document.title="Edit Profile \u2022 Timcha"}),[]),s.a.createElement(v.default,{onSubmit:m.handleSubmit},s.a.createElement(O.default,null,s.a.createElement(j.default,null,s.a.createElement(h.default,{className:"avatar--small",imageSrc:t.avatar,style:{alignSelf:"start"}})),s.a.createElement("div",{style:{lineHeight:"2.2rem"}},s.a.createElement("h3",{className:"heading-2 font-medium"},m.values.username),s.a.createElement(j.default,null))),s.a.createElement(O.default,null,s.a.createElement("label",{className:"heading-3 font-bold"},"Name"),s.a.createElement(b.default,{name:"fullName",fieldProps:m.getFieldProps("fullName")})),s.a.createElement(O.default,null,s.a.createElement("label",{className:"heading-3 font-bold"},"Username"),s.a.createElement(b.default,{name:"username",fieldProps:m.getFieldProps("username")})),s.a.createElement(O.default,null,s.a.createElement("label",{className:"heading-3 font-bold"},"Website"),s.a.createElement(b.default,{name:"website",fieldProps:m.getFieldProps("website")})),s.a.createElement(O.default,null,s.a.createElement("label",{className:"heading-3 font-bold"},"Bio"),s.a.createElement(g.default,{name:"bio",fieldProps:m.getFieldProps("bio")})),s.a.createElement(O.default,null,s.a.createElement("label",null),s.a.createElement("div",null,s.a.createElement("h3",{className:"heading-3 color-grey font-bold"},"Personal Information"),s.a.createElement("p",{style:{fontSize:"1.3rem",lineHeight:"1.6rem"},className:"color-grey"},"Provide your personal information, even if the account is used for a business, a pet or something else. This won't be a part of your public profile."))),s.a.createElement(O.default,null,s.a.createElement("label",{className:"heading-3 font-bold"},"Email"),s.a.createElement(b.default,{name:"email",fieldProps:m.getFieldProps("email")})),s.a.createElement(O.default,null,s.a.createElement("label",null),s.a.createElement(E.default,{style:{width:"10rem"},disabled:0===Object.keys(m.touched).length,loading:u,onClick:function(){m.isValid||a(Object.values(m.errors)[0])}},"Submit")))}))},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a(9),s=a(194),i=a(61),l=a(146),u=Object(o.b)({feedPosts:s.b,feedFetching:s.a});t.default=Object(c.b)(u)((function(e){var t=e.feedPosts,a=e.feedFetching;return r.a.createElement("section",{className:"feed"},t&&t.map((function(e,t){return r.a.createElement(i.default,{simple:!0,postData:e,postId:e._id,key:t})})),a&&r.a.createElement(n.Fragment,null,r.a.createElement(i.default,{simple:!0,loading:!0}),r.a.createElement(i.default,{simple:!0,loading:!0}),r.a.createElement(i.default,{simple:!0,loading:!0})),!a&&t.length>0&&r.a.createElement(l.default,null))}))},202:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a(4),s=a(18);t.default=function(){var e=function(){return r.a.createElement("a",{style:{textDecoration:"none"},href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(s.default,{style:{color:"#dbdbdb",padding:"0px",border:"0px",marginLeft:"10px"},inverted:!0},"\u7cb5ICP\u509920012196\u865f"))},t=function(){return r.a.createElement("a",{style:{textDecoration:"none"},href:"https://art.timcha.net/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(s.default,{style:{color:"#dbdbdb",padding:"0px",border:"0px",marginLeft:"10px"},inverted:!0},"\u5f69\u86cb"))};return r.a.createElement("footer",{className:"footer--small color-grey-2 font-bold"},r.a.createElement("div",{className:"footer--small__links"},["About","Help","Press","API","Jobs","Privacy","Terms","Locations","Top Accounts","Hashtags","Language"].map((function(e,t){return r.a.createElement(c.b,{key:t,to:"/"},e)}))),r.a.createElement("h5",{className:"heading-5 color-grey-2 footer--small__copyright mt-lg font-bold",style:{textTransform:"uppercase "}},"@2021"," ",r.a.createElement(o.default,{icon:"heart",className:"color-grey-2 icon--small",style:{margin:"0 5px"}})," ","\u751c\u8336",r.a.createElement(t,null),r.a.createElement(e,null)))}},203:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(15),o=a(1),s=a(3),i=a(5),l=a(0),u=a.n(l),m=a(24),d=a(58),f=a(37),p=a(57),h=a(16),b=a(95),g=a(27),E=a(102);t.default=function(e){var t=e.token,a=e.showModal,n=e.showAlert,v=Object(l.useState)({posts:[],postCount:0,fetching:!1,hasMore:!1}),O=Object(i.a)(v,2),j=O[0],y=O[1],_=Object(m.i)().hashtag,w=Object(m.g)(),N=function(){var e=Object(s.a)(r.a.mark((function e(a){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y((function(e){return Object(o.a)(Object(o.a)({},e),{},{fetching:!0})})),e.next=4,Object(f.d)(t,_,a);case 4:(s=e.sent).posts?y((function(e){return{posts:e.posts?[].concat(Object(c.a)(e.posts),Object(c.a)(s.posts)):s.posts,postCount:s.postCount,fetching:!1,hasMore:20===s.length}})):y((function(e){return Object(o.a)(Object(o.a)({},e),{},{fetching:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(d.a)((function(e){e.atBottom&&j.hasMore&&!j.fetching&&N(j.posts.length)}),null,[j]);var S=Object(l.useRef)(N);return Object(l.useEffect)((function(){S.current()}),[S]),j.fetching||0!==j.posts.length?u.a.createElement(l.Fragment,null,u.a.createElement(p.default,{backArrow:!0},u.a.createElement(h.default,{style:{justifySelf:"center"},bold:!0,large:!0},"#",_)),u.a.createElement("div",{className:"hashtag-posts__title"},u.a.createElement("h2",{className:"heading-2"},"#",_),u.a.createElement("h3",{className:"heading-3 font-medium"},u.a.createElement("span",{className:"font-bold"},j.postCount)," ",1===j.postCount?"post":"posts")),u.a.createElement(E.default,null,j.posts&&j.posts.map((function(e,t){return u.a.createElement(b.default,{key:t,image:e.thumbnail,likes:e.postVotes,comments:e.comments,filter:e.filter,onClick:function(){return t=e._id,n=e.avatar,void(window.outerWidth<=600?w.push("/post/".concat(t)):a({postId:t,avatar:n},"PostDialog/PostDialog"));var t,n}})})),j.fetching&&function(e){for(var t=[],a=0;a<e;a++)t.push(u.a.createElement(g.default,{key:a,style:{minHeight:"30rem"},animated:!0}));return t}(10))):u.a.createElement("div",{className:"hashtag-posts__empty"},u.a.createElement("h2",{className:"heading-2"},"Could not find any post associated with #",_,"."))}},204:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(1),s=a(5),i=a(0),l=a.n(i),u=a(37),m=a(150),d=a(151),f=a(57),p=a(16),h=a(4);t.default=function(e){var t=e.file,a=e.hide,n=Object(i.useState)({src:null,crop:{},filter:null,filterName:""}),b=Object(s.a)(n,2),g=b[0],E=b[1],v=Object(i.useState)("filter"),O=Object(s.a)(v,2),j=O[0],y=O[1],_=Object(i.useState)([]),w=Object(s.a)(_,2),N=w[0],S=w[1];Object(i.useEffect)((function(){if("image/png"===t.type||"image/jpeg"===t.type){var e=new FileReader;e.readAsDataURL(t),e.onload=function(e){E((function(t){return Object(o.a)(Object(o.a)({},t),{},{src:e.target.result})}))}}return function(){window.URL.revokeObjectURL(g)}}),[t]),Object(i.useEffect)((function(){Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.f)();case 3:t=e.sent,S(t.filters),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return l.a.createElement("section",{className:"new-post"},"details"!==j&&l.a.createElement(f.default,{show:!0},l.a.createElement(h.default,{icon:"close-outline",onClick:function(){return a()},style:{cursor:"pointer"}}),l.a.createElement("h3",{className:"heading-3"},"New Post"),l.a.createElement(p.default,{bold:!0,blue:!0,style:{fontSize:"1.5rem"},onClick:function(){return y("details")}},"Next")),function(){switch(j){case"details":return l.a.createElement(m.default,{file:t,previewImage:g,back:function(){return y("filter")},hide:function(){return a()}});default:return l.a.createElement(d.default,{previewImage:g,setPreviewImage:E,filters:N})}}(),"details"!==j&&l.a.createElement("nav",{className:"new-post__nav"},l.a.createElement("ul",null,l.a.createElement("li",{className:"new-post__nav-item ".concat("filter"===j&&"new-post__nav-item--active"),onClick:function(){return y("filter")},style:{width:"100%"}},l.a.createElement("h4",{className:"heading-4"},"Filter")))))}},205:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4);t.default=function(e){var t=e.category,a=e.icon;return r.a.createElement("div",{className:"profile-categories"},r.a.createElement("div",{className:"profile-categories__category"},r.a.createElement(c.default,{icon:a}),r.a.createElement("h3",{className:"font-medium"},t)))}},206:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a(9),s=a(7),i=a(159),l=a(36),u=a(11),m=a(49),d=a(18),f=a(16),p=a(53),h=a(52),b=a(23),g=a(100),E=a(101),v=Object(o.b)({error:u.b,fetching:u.c});t.default=Object(c.b)(v,(function(e){return{signUpStart:function(t,a,n,r){return e(Object(l.g)(t,a,n,r))}}}))((function(e){var t=e.signUpStart,a=e.error,c=e.fetching,o=Object(i.a)({initialValues:{email:"",fullName:"",username:"",password:""},validate:function(e){var t={},a=Object(m.b)(e.email);a&&(t.email=a);var n=Object(m.c)(e.fullName);n&&(t.fullName=n);var r=Object(m.e)(e.username);r&&(t.username=r);var c=Object(m.d)(e.password);return c&&(t.password=c),t},onSubmit:function(e){return t(e.email,e.fullName,e.username,e.password)}});return r.a.createElement(n.Fragment,null,r.a.createElement(h.default,{className:"form-card"},r.a.createElement("h1",{className:"heading-logo text-center"},"Timcha"),r.a.createElement("h2",{style:{fontSize:"1.7rem"},className:"heading-2 color-grey text-center"},"Sign up to see photos and videos from your friends."),r.a.createElement(E.default,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",color:"white"},button:!0}),r.a.createElement(p.default,null,"OR"),Object.keys(o.errors).map((function(e){if(o.touched[e])return r.a.createElement("p",{className:"error",key:o.errors[e],style:{marginTop:"0"}},o.errors[e])})),r.a.createElement("form",{className:"form-card__form",onSubmit:o.handleSubmit},r.a.createElement(b.default,{name:"email",fieldProps:o.getFieldProps("email"),valid:o.touched.email&&!o.errors.email,placeholder:"Email address"}),r.a.createElement(b.default,{name:"fullName",fieldProps:o.getFieldProps("fullName"),valid:o.touched.fullName&&!o.errors.fullName,placeholder:"Full Name"}),r.a.createElement(b.default,{name:"username",fieldProps:o.getFieldProps("username"),valid:o.touched.username&&!o.errors.username,placeholder:"Username"}),r.a.createElement(b.default,{name:"password",fieldProps:o.getFieldProps("password"),placeholder:"Password",valid:o.touched.password&&!o.errors.password,type:"password"}),r.a.createElement(d.default,{loading:c,disabled:0===Object.keys(o.touched).length||!o.isValid},"Sign Up"),r.a.createElement("p",null)),r.a.createElement("p",{className:"error"},a||o.submitCount>0&&Object.values(o.errors)[0]),r.a.createElement("p",{className:"heading-5 color-grey"},"\u63d0\u793a\uff1a\u5bc6\u78bc\u8981\u6c42\u5927\u5c0f\u5beb\u5b57\u6bcd\u3001\u6578\u5b57\u548c\u7279\u6b8a\u7b26\u865f\u7d44\u5408\u3002 \u9ede\u64ca\u8a3b\u518a\uff0c\u5373\u8868\u793a\u4f60\u540c\u610f\u6211\u5011\u7684\u689d\u6b3e\u3002")),r.a.createElement(h.default,null,r.a.createElement("section",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem"}},r.a.createElement("h4",{style:{marginRight:"5px"},className:"heading-4 font-thin"},"Have an account?"),r.a.createElement(s.b,{to:"/login"},r.a.createElement(f.default,{medium:!0,blue:!0,bold:!0},"Log in")))),r.a.createElement(g.default,null))}))},207:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(15),o=a(1),s=a(3),i=a(5),l=a(0),u=a.n(l),m=a(24),d=a(58),f=a(37),p=a(57),h=a(96),b=a(16),g=a(41),E=a(95),v=a(102);t.default=function(e){var t=e.token,a=e.showModal,n=e.showAlert,O=Object(m.g)(),j=Object(l.useState)([]),y=Object(i.a)(j,2),_=y[0],w=y[1],N=Object(l.useState)(!1),S=Object(i.a)(N,2),T=S[0],C=S[1],k=Object(l.useState)({posts:null,fetching:!1,hasMore:!1}),I=Object(i.a)(k,2),x=I[0],A=I[1],R=function(){var e=Object(s.a)(r.a.mark((function e(a){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A((function(e){return Object(o.a)(Object(o.a)({},e),{},{fetching:!0})})),e.next=4,Object(f.h)(t,a);case 4:s=e.sent,A((function(e){return{posts:e.posts?[].concat(Object(c.a)(e.posts),Object(c.a)(s)):s,fetching:!1,hasMore:20===s.length}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=Object(l.useRef)(R);return Object(l.useEffect)((function(){P.current()}),[P]),Object(d.a)((function(e){e.atBottom&&x.hasMore&&!x.fetching&&R(x.posts.length)}),null,[x]),u.a.createElement(l.Fragment,null,u.a.createElement(p.default,{style:T&&{gridTemplateColumns:"repeat(2, 1fr) min-content",gridColumnGap:"2rem"}},u.a.createElement(h.default,{style:{gridColumn:"".concat(T?"1 / span 2":"1 / -1")},setResult:w,onClick:function(){return C(!0)}}),T&&u.a.createElement(b.default,{onClick:function(){return C(!1)},bold:!0,large:!0},"\u53d6\u6d88")),T?u.a.createElement("div",{className:"explore-users"},_.map((function(e){return u.a.createElement(g.default,{avatar:e.avatar,username:e.username,subText:e.fullName})}))):u.a.createElement(v.default,null,x.posts&&x.posts.map((function(e,t){return u.a.createElement(E.default,{key:t,image:e.thumbnail,placeholder:e.placeholder,likes:e.postVotes,comments:e.comments,filter:e.filter,onClick:function(){return t=e._id,n=e.avatar,void(window.outerWidth<=600?O.push("/post/".concat(t)):a({postId:t,avatar:n},"PostDialog/PostDialog"));var t,n}})}))))}},208:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(8),u=a(9),m=a(30),d=a(11),f=a(59),p=a(41),h=a(54),b=a(52),g=a(69),E=a(152),v=Object(u.b)({token:d.e});t.default=Object(l.b)(v,(function(e){return{showAlert:function(t,a){return e(Object(m.a)(t,a))}}}))((function(e){var t=e.token,a=e.showAlert,n=e.card,l=e.style,u=e.max,m=Object(s.useState)(null),d=Object(o.a)(m,2),v=d[0],O=d[1];Object(s.useEffect)((function(){Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.c)(t,u);case 3:n=e.sent,O(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[t,a]);var j=function(){return v?v.length>0?v.map((function(e,t){return i.a.createElement(p.default,{avatar:e.avatar,username:e.username,subText:e.fullName,style:n?{padding:"1.5rem"}:{padding:"1rem 0"},key:t},i.a.createElement(g.default,{userId:e._id,username:e.username,following:!1,avatar:e.avatar}))})):i.a.createElement("h4",{className:"heading-4 color-grey font-medium"},"We currently can't find any users to suggest."):i.a.createElement(h.default,{amount:5,style:{padding:"1.5rem"}})};return i.a.createElement("div",{className:"suggested-users",style:l},i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"suggested-users__large"},i.a.createElement("h3",{className:"heading-3 mb-md"},"Suggestions for you"),n?i.a.createElement(b.default,null,j()):i.a.createElement("div",null,j())),i.a.createElement("div",{className:"suggested-users__small"},i.a.createElement("div",{className:"suggested-users__title"},i.a.createElement("h2",{className:"heading-2 font-thin"},"Welcome to Timcha"),i.a.createElement("h3",{className:"heading-3 font-medium color-grey"},"When you follow somebody you can see their photos here.")),i.a.createElement("div",{className:"suggested-users__card-container"},v&&v.map((function(e,t){return i.a.createElement(E.default,{avatar:e.avatar,username:e.username,fullName:e.fullName,posts:e.posts,key:t},i.a.createElement(g.default,{userId:e._id,username:e.username,following:!1,avatar:e.avatar,style:{width:"90%"}}))}))))))}))},209:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(88),u=a(58),m=a(121),d=a(41),f=a(54),p=a(4),h=a(69);t.default=function(e){var t=e.userId,a=e.token,n=e.followingCount,b=e.followersCount,g=e.following,E=Object(s.useReducer)(m.usersListReducer,m.INITIAL_STATE),v=Object(o.a)(E,2),O=v[0],j=v[1],y=Object(s.useRef)();Object(u.a)(function(){var e=Object(c.a)(r.a.mark((function e(c){var o,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.atBottom,s=n||b,!(o&&O.data.length<s)||O.fetching||O.fetchingAdditional){e.next=21;break}if(e.prev=3,j({type:"FETCH_ADDITIONAL_START"}),!g){e.next=11;break}return e.next=8,Object(l.d)(t,O.data.length,a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Object(l.c)(t,O.data.length,a);case 13:e.t0=e.sent;case 14:i=e.t0,j({type:"ADD_USERS",payload:i}),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(3),j({type:"FETCH_FAILURE",payload:e.t1});case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),y.current);var _=Object(s.useRef)(O.data).current,w=Object(s.useRef)(g).current;return Object(s.useEffect)((function(){Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j({type:"FETCH_START"}),!w){e.next=8;break}return e.next=5,Object(l.d)(t,_?_.length:0,a);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,Object(l.c)(t,_?_.length:0,a);case 10:e.t0=e.sent;case 11:n=e.t0,j({type:"FETCH_SUCCESS",payload:n}),e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),j({type:"FETCH_FAILURE",payload:e.t1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))()}),[t,a,_,w]),i.a.createElement("section",{className:"following-overview",ref:y,style:{overflowY:"auto"}},b||n?O.fetching?i.a.createElement(f.default,null):O.data.map((function(e,t){return i.a.createElement(d.default,{key:t,avatar:e.avatar,username:e.username,subText:e.fullName,userId:e._id,following:e.isFollowing},i.a.createElement(h.default,{userId:e._id,following:e.isFollowing,username:e.username,avatar:e.avatar}))})):i.a.createElement("div",{style:{padding:"2rem",textAlign:"center"}},i.a.createElement(p.default,{style:{margin:"0 auto"},className:"icon--larger",icon:"person-add-outline"}),i.a.createElement("h2",{className:"heading-2 font-thin"},g?"People the user follows":"People who follow the user"),i.a.createElement("h4",{className:"heading-4 font-medium"},g?"Once the user follows somebody, you'll see them here.":"Once somebody follows the user, you'll see them here")),O.fetchingAdditional&&i.a.createElement(f.default,null))}},21:function(e,t,a){"use strict";a.r(t),a.d(t,"INITIAL_STATE",(function(){return r})),a.d(t,"postDialogCommentFormReducer",(function(){return c}));var n=a(1),r={posting:!1,error:!1,comment:""},c=function(e,t){switch(t.type){case"POST_COMMENT_START":return Object(n.a)(Object(n.a)({},e),{},{posting:!0});case"POST_COMMENT_FAILURE":return Object(n.a)(Object(n.a)({},e),{},{posting:!1,error:t.payload});case"POST_COMMENT_SUCCESS":var a=t.payload,c=a.comment,o=a.dispatch;return o&&o({type:"ADD_COMMENT",payload:c}),r;case"POST_COMMENT_REPLY_SUCCESS":var s=t.payload,i=s.comment,l=s.dispatch,u=s.parentCommentId;return l&&l({type:"ADD_COMMENT_REPLY",payload:{comment:i,parentCommentId:u}}),r;case"SET_COMMENT":return Object(n.a)(Object(n.a)({},e),{},{comment:t.payload});default:throw new Error("Invalid action type '".concat(t.type,"' passed to postDialogCommentFormReducer."))}}},22:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n=a(110),r=function(e){return{type:n.a.HIDE_MODAL,payload:e}},c=function(e,t){return{type:n.a.SHOW_MODAL,payload:{props:e,component:t}}}},23:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(5),c=a(55),o=a(0),s=a.n(o),i=a(4);t.default=function(e){var t=e.type,a=e.style,l=e.valid,u=e.placeholder,m=e.fieldProps,d=Object(c.a)(e,["type","style","valid","placeholder","fieldProps"]),f=Object(o.useState)("password"),p=Object(r.a)(f,2),h=p[0],b=p[1];return s.a.createElement("div",{style:Object(n.a)(Object(n.a)({},a),{},{marginBottom:u?"0.5rem":"0"}),"data-test":"component-input",className:"form-group"},s.a.createElement("input",Object.assign({className:"form-group__input",type:"password"===t?h:t,placeholder:u,style:u?{}:{padding:"1rem"}},m,d)),s.a.createElement("span",{className:"form-group__placeholder"},u),s.a.createElement("div",{className:"input-icons"},"boolean"===typeof l?l?s.a.createElement(i.default,{className:"color-grey",icon:"checkmark-circle-outline"}):s.a.createElement(i.default,{className:"color-red",icon:"close-circle-outline"}):null,"password"===t&&s.a.createElement("span",{onClick:function(){b("password"===h?"text":"password")},className:"form-group__toggle"},"password"===h?"Show":"Hide")))}},235:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/default-avatar.522560c8.png"},239:function(e,t,a){"use strict";a.r(t),a.d(t,"setup",(function(){return i}));var n=a(0),r=a.n(n),c=a(60),o=a(103),s=a(28),i=function(){return Object(c.shallow)(r.a.createElement(o.UnconnectedApp,{modal:{modals:[]}}))};describe("render",(function(){test("renders without error",(function(){var e=i(),t=Object(s.b)(e,"component-app");expect(t.exists()).toBeTruthy()}))}))},25:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(0),c=a.n(r),o=a(14),s=a.n(o);t.default=function(e){var t=e.imageSrc,r=void 0===t?a(235).default:t,o=e.className,i=e.onClick,l=e.style,u=s()(Object(n.a)({avatar:!0},o,o));return c.a.createElement("img",{className:u,onClick:i,style:l,src:r,alt:"Avatar"})}},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(e){var t=e.style;return e.animated?r.a.createElement("div",{style:t,className:"skeleton-loader--animated"}):r.a.createElement("div",{style:t,className:"skeleton-loader"})}},28:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a(15),r=a(316),c=a.n(r),o=a(62),s=a(161),i=a(156),l=function(e){return Object(o.d)(s.a,e,o.a.apply(void 0,Object(n.a)(i.b)))},u=function(e,t){return e.find("[data-test='".concat(t,"']"))},m=function(e,t){return c()(e.propTypes,t,"prop",e.name)}},29:function(e,t,a){"use strict";a.r(t),a.d(t,"INITIAL_STATE",(function(){return c})),a.d(t,"postDialogReducer",(function(){return o}));var n=a(15),r=a(1),c={fetching:!0,error:!1,replying:!1,localStateComments:new Set,data:{_id:null,image:"",caption:"",author:null,date:null,postVotes:[],comments:[],commentReplies:[]}},o=function(e,t){switch(t.type){case"FETCH_POST_FAILURE":return Object(r.a)(Object(r.a)({},e),{},{fetching:!1,error:t.payload});case"FETCH_POST_SUCCESS":var a=t.payload.commentData||{},c=a.comments,o=void 0===c?[]:c,s=a.commentCount,i=void 0===s?0:s;return Object(r.a)(Object(r.a)({},e),{},{fetching:!1,error:!1,data:Object(r.a)(Object(r.a)({},t.payload),{},{commentReplies:[],comments:o,commentCount:i})});case"VOTE_POST":var l=t.payload,u=l.currentUser,m=l.postId,d=l.dispatch,f=JSON.parse(JSON.stringify(e.data.postVotes));return!!f.find((function(e){return e.author===u._id}))?f=f.filter((function(e){return e.author!==u._id})):f.push({author:u._id}),d&&d({type:"SET_POST_VOTES_COUNT",payload:{postId:m,votes:f.length}}),Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{postVotes:f})});case"VOTE_COMMENT":var p=t.payload,h=p.commentId,b=p.currentUser,g=JSON.parse(JSON.stringify(e.data.comments)),E=g.findIndex((function(e){return e._id===h}));return!!g[E].commentVotes.find((function(e){return e.author===b._id}))?g[E].commentVotes=g[E].commentVotes.filter((function(e){return e.author!==b._id})):g[E].commentVotes.push({author:b._id}),Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{comments:g})});case"ADD_COMMENT":var v=t.payload,O=new Set(e.localStateComments);return Array.isArray(v)||(O.add(v._id),v=[v]),Object(r.a)(Object(r.a)({},e),{},{localStateComments:O,data:Object(r.a)(Object(r.a)({},e.data),{},{comments:[].concat(Object(n.a)(e.data.comments),Object(n.a)(v))})});case"REMOVE_COMMENT":var j=t.payload,y=new Set(e.localStateComments);return y.has(j)&&y.delete(j),Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{localStateComments:y,comments:e.data.comments.filter((function(e){return e._id!==j})),commentCount:e.data.commentCount-1})});case"ADD_COMMENT_REPLY":var _=t.payload,w=_.comment,N=_.parentCommentId,S=JSON.parse(JSON.stringify(e.data.comments)),T=S.findIndex((function(e){return e._id===N}));if(!Array.isArray(w)){var C=S[T];w=[w],C.commentReplies=C.commentReplies?C.commentReplies+1:1}return Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{comments:S,commentReplies:[].concat(Object(n.a)(e.data.commentReplies),Object(n.a)(w))})});case"REMOVE_COMMENT_REPLY":var k=t.payload,I=k.commentReplyId,x=k.parentCommentId,A=JSON.parse(JSON.stringify(e.data.comments)),R=A.findIndex((function(e){return e._id===x}));return A[R].commentReplies-=1,Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{comments:A,commentReplies:e.data.commentReplies.filter((function(e){return e._id!==I}))})});case"VOTE_COMMENT_REPLY":var P=t.payload,F=P.commentReplyId,D=P.currentUser,U=JSON.parse(JSON.stringify(e.data.commentReplies)),M=e.data.commentReplies.findIndex((function(e){return e._id===F}));return!!U[M].commentReplyVotes.find((function(e){return e.author===D._id}))?U[M].commentReplyVotes=U[M].commentReplyVotes.filter((function(e){return e.author!==D._id})):U[M].commentReplyVotes.push({author:D._id}),Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{commentReplies:U})});case"SET_REPLYING":var L=t.payload||{},H=L.username,V=L.commentId;return H&&V?e.replying.commentId===V&&e.replying.commentUser===H?e:Object(r.a)(Object(r.a)({},e),{},{replying:{commentUser:H,commentId:V}}):Object(r.a)(Object(r.a)({},e),{},{replying:!1});default:throw new Error("Invalid action type '".concat(t.type,"' passed to postDialogReducer."))}}},30:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(65),r=function(){return{type:n.a.HIDE_ALERT}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a,c){var o=c();clearTimeout(o.alert.timeoutId);var s=setTimeout((function(){a(r()),a({type:n.a.SET_ALERT_TIMEOUT_ID,payload:null})}),5e3);a({type:n.a.SET_ALERT_TIMEOUT_ID,payload:s}),o.alert.showAlert?(a(r()),setTimeout((function(){a({type:n.a.SHOW_ALERT,payload:{text:e,onClick:t}})}),500)):a({type:n.a.SHOW_ALERT,payload:{text:e,onClick:t}})}}},304:function(e,t,a){"use strict";a.r(t),a.d(t,"setup",(function(){return u}));var n=a(1),r=a(0),c=a.n(r),o=a(60),s=a(23),i=a(28),l={placeholder:"sfds",type:"text",onChange:jest.fn(),required:!0},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.a)(Object(n.a)({},l),e),a=Object(o.shallow)(c.a.createElement(s.default,t));return a};describe("render",(function(){test("renders without error",(function(){var e=u(),t=Object(i.b)(e,"component-input");expect(t.exists()).toBeTruthy()}))})),test("does not throw error with expected props",(function(){var e=Object(i.a)(s.default,l);expect(e).toBeUndefined()}))},305:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(1),o=a(3),s=a(5),i=a(0),l=a.n(i),u=a(322),m=a.n(u),d=(a(516),a(4));t.default=function(e){var t=e.previewImage,a=e.setPreviewImage,n=(e.file,Object(i.useState)({crop:{unit:"%",aspect:16/9},isCropping:!1})),u=Object(s.a)(n,2),f=u[0],p=u[1],h=Object(i.useRef)(),b=function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height),new Promise((function(e,t){a.toBlob((function(t){if(t){t.name="cropped.jpeg";var a=window.URL.createObjectURL(t);e(a)}else console.error("Canvas is empty")}),"image/jpeg")}))},g=function(){var e=Object(o.a)(r.a.mark((function e(n){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.URL.revokeObjectURL(t.src),!(f.imageRef&&n.width&&n.height)){e.next=7;break}return e.next=4,b(f.imageRef,n);case 4:o=e.sent,a({src:o,crop:n}),p((function(e){return Object(c.a)(Object(c.a)({},e),{},{isCropping:!1})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:"new-post__preview"},l.a.createElement("div",{className:"new-post__preview-image-container"},l.a.createElement(m.a,{src:t.src,crop:f.crop,onChange:function(e,t){p((function(t){return Object(c.a)(Object(c.a)({},t),{},{crop:e})}))},onImageLoaded:function(e){p((function(t){return Object(c.a)(Object(c.a)({},t),{},{imageRef:e})}))},onDragStart:function(){p((function(e){return Object(c.a)(Object(c.a)({},e),{},{isCropping:!0})}))},style:{width:"100%",height:"100%"},ref:h,imageStyle:{width:"100%",height:"100%",objectFit:"contain",filter:t.filter},ruleOfThirds:!0}),l.a.createElement(d.default,{icon:"checkmark-outline",className:"new-post__crop-button",style:f.isCropping?{display:"inline-block"}:{},onClick:function(){return g(f.crop)}}))))}},306:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(0),c=a.n(r),o=a(38),s=a(14),i=a.n(s),l=a(16);t.default=function(e){var t=e.hide,a=e.options,r=e.children,s=e.title,u=e.cancelButton,m=void 0===u||u;return Object(o.b)(!0,null,{from:{transform:"scale(1.2)",opacity:.5},enter:{transform:"scale(1)",opacity:1},leave:{opacity:0},config:{mass:1,tension:500,friction:30}}).map((function(e){e.item;var u=e.key,d=e.props;return c.a.createElement(o.a.div,{style:d,key:u,className:"options-dialog"},s&&c.a.createElement("header",{className:"options-dialog__title"},c.a.createElement("h1",{className:"heading-3"},s),!m&&c.a.createElement(l.default,{style:{fontSize:"3rem"},onClick:function(){return t()}},"\u2715")),r,a.map((function(e,a){var r=i()(Object(n.a)({"options-dialog__button":!0,"options-dialog__button--warning":e.warning},e.className,e.className));return c.a.createElement("button",{onClick:function(a){e.hasOwnProperty("onClick")&&(a.stopPropagation(),e.onClick(),t())},className:r,key:a},e.text)})),m&&c.a.createElement("button",{className:"options-dialog__button",onClick:function(e){e.nativeEvent.stopImmediatePropagation(),t()}},"Cancel"))}))}},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(60),o=a(61),s=a(28),i={postId:"456",username:"test",profileDispatch:jest.fn()},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{token:"123",currentUser:{username:"test"}}},t=Object(s.c)(e),a=Object(c.shallow)(r.a.createElement(o.default,Object.assign({store:t},i))).dive();return a};test("renders without error",(function(){var e=l().dive(),t=Object(s.b)(e,"component-post-dialog");expect(t.exists()).toBeTruthy()})),describe("redux props",(function(){test("has token piece of state as prop",(function(){var e=l();expect(e.props().token).toBe("123")})),test("has currentUser piece of state as prop",(function(){var e=l();expect(e.props().currentUser).toEqual({username:"test"})}))})),test("does not throw error with expected props",(function(){var e=Object(s.a)(o.default,i);expect(e).toBeUndefined()}))},308:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(0),s=a.n(o),i=a(60),l=a(86),u=a(28),m=a(31);jest.mock("../../../services/commentService");var d={token:"123",postId:"456",commentsRef:{},dialogDispatch:jest.fn(),profileDispatch:jest.fn(),replying:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.shallow)(s.a.createElement(l.default,Object.assign({},d,e)));return t};test("renders without error",(function(){var e=f(),t=Object(u.b)(e,"component-post-dialog-add-comment");expect(t.exists()).toBeTruthy()})),test("does not throw error with expected props",(function(){var e=Object(u.a)(l.default,d);expect(e).toBeUndefined()})),describe("form input",(function(){beforeEach((function(){m.a.mockClear()})),test("does not attempt to create a comment when the input is empty",(function(){m.a.mockResolvedValue({});var e=f();Object(u.b)(e,"component-post-dialog-add-comment").simulate("submit",{preventDefault:jest.fn()}),expect(m.a).toHaveBeenCalledTimes(0)})),test("clears the input after a comment has been posted",Object(c.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return expect.assertions(1),m.a.mockResolvedValue({_id:"123",message:"test comment",author:{_id:"321",username:"test"},date:Date.now(),postVotes:[],comments:[]}),t=f(),a=Object(u.b)(t,"component-post-dialog-add-comment"),Object(u.b)(t,"component-add-comment-input").simulate("change",{target:{value:"test"}}),a.simulate("submit",{preventDefault:jest.fn()}),e.next=9,expect(m.a).toHaveBeenCalledTimes(1);case 9:case"end":return e.stop()}}),e)}))))}))},309:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(21);test("returns expected state when `POST_COMMENT_START` is passed",(function(){var e=Object(r.postDialogCommentFormReducer)(r.INITIAL_STATE,{type:"POST_COMMENT_START"});expect(e).toEqual(Object(n.a)(Object(n.a)({},r.INITIAL_STATE),{},{posting:!0}))})),test("returns expected state when `POST_COMMENT_FAILURE` is passed",(function(){var e=Object(r.postDialogCommentFormReducer)(Object(n.a)(Object(n.a)({},r.INITIAL_STATE),{},{posting:!0}),{type:"POST_COMMENT_FAILURE",payload:"error"});expect(e).toEqual(Object(n.a)(Object(n.a)({},r.INITIAL_STATE),{},{posting:!1,error:"error"}))})),test("returns expected state and calls dispatch when `POST_COMMENT_SUCCESS` is called",(function(){var e=jest.fn(),t=Object(r.postDialogCommentFormReducer)(r.INITIAL_STATE,{type:"POST_COMMENT_SUCCESS",payload:{comment:"test",dispatch:e}});expect(t).toEqual(r.INITIAL_STATE),expect(e).toHaveBeenCalledTimes(1)})),test("returns expected state and calls dispatch when `POST_COMMENT_REPLY_SUCCESS` is called",(function(){var e=jest.fn(),t=Object(r.postDialogCommentFormReducer)(r.INITIAL_STATE,{type:"POST_COMMENT_REPLY_SUCCESS",payload:{comment:"test",dispatch:e,parentCommentId:"123"}});expect(t).toEqual(r.INITIAL_STATE),expect(e).toHaveBeenCalledTimes(1)})),test("returns expected state when `SET_COMMENT` is passed",(function(){var e=Object(r.postDialogCommentFormReducer)(r.INITIAL_STATE,{type:"SET_COMMENT",payload:"test comment"});expect(e).toEqual(Object(n.a)(Object(n.a)({},r.INITIAL_STATE),{},{comment:"test comment"}))})),test("throws error when an invalid action is passed",(function(){expect((function(){return Object(r.postDialogCommentFormReducer)(r.INITIAL_STATE,{type:"test"})})).toThrow()}))},31:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"h",(function(){return f})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return h}));var n=a(2),r=a.n(n),c=a(3),o=a(10),s=a.n(o),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/comment/".concat(a),{message:t},{headers:{authorization:n}});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.delete("/api/comment/".concat(t),{headers:{authorization:a}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/comment/".concat(t,"/vote"),null,{headers:{authorization:a}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,a,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/comment/".concat(a,"/reply"),{message:t},{headers:{authorization:n}});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.delete("/api/comment/".concat(t,"/reply"),{headers:{authorization:a}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/comment/".concat(t,"/replyVote"),null,{headers:{authorization:a}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:0,e.prev=1,e.next=4,s.a.get("/api/comment/".concat(t,"/").concat(a,"/replies"));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:0,e.prev=1,e.next=4,s.a.get("/api/comment/".concat(t,"/").concat(a,"/").concat(n));case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()},310:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(1),c=a(29),o={_id:"456",message:"test",author:{_id:"123",username:"test"},post:"12345",date:32432432324,commentReplies:0,commentVotes:[]},s={_id:"12345",image:"www.image.com",caption:"test post",author:{username:"test"},date:32432432324,postVotes:[{votes:[]}],comments:[o],commentReplies:[]},i={_id:"123",username:"test"},l={fetching:!1,error:!1,replying:!1,data:s};test("throws error when an invalid action is passed",(function(){expect((function(){return Object(c.postDialogReducer)(null,{type:"test"}).toThrow()}))})),test("returns expected state when `FETCH_POST_FAILURE` is passed",(function(){var e="failed",t=Object(c.postDialogReducer)(c.INITIAL_STATE,{type:"FETCH_POST_FAILURE",payload:e});expect(t).toEqual(Object(r.a)(Object(r.a)({},c.INITIAL_STATE),{},{fetching:!1,error:e}))})),test("returns expected state when `FETCH_POST_SUCCESS` is passed",(function(){var e=Object(c.postDialogReducer)(c.INITIAL_STATE,{type:"FETCH_POST_SUCCESS",payload:s});expect(e).toEqual({fetching:!1,error:!1,replying:!1,data:s})})),test("returns expected state and calls dispatch when `VOTE_POST` is passed",(function(){var e=jest.fn(),t=Object(c.postDialogReducer)(l,{type:"VOTE_POST",payload:{currentUser:i,postId:"321",dispatch:e}});expect(t).toEqual({fetching:!1,error:!1,replying:!1,data:Object(r.a)(Object(r.a)({},s),{},{postVotes:[{votes:[{author:i._id}]}]})}),expect(e).toHaveBeenCalledTimes(1)})),test("returns expected state when `VOTE_COMMENT` is passed and comment has NOT been voted on",(function(){var e=Object(c.postDialogReducer)(l,{type:"VOTE_COMMENT",payload:{commentId:"456",currentUser:i}});expect(e).toEqual(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{comments:[Object(r.a)(Object(r.a)({},o),{},{commentVotes:[{author:i._id}]})]})}))})),test("returns expected state when `ADD_COMMENT` is passed",(function(){var e={_id:"678",message:"test2",author:i,post:"12345",date:32432432324,commentReplies:0,commentVotes:[]},t=Object(c.postDialogReducer)(l,{type:"ADD_COMMENT",payload:e});expect(t).toEqual(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{comments:[].concat(Object(n.a)(l.data.comments),[e])})}))})),test("returns expected state when `REMOVE_COMMENT` is passed",(function(){var e=Object(c.postDialogReducer)(l,{type:"REMOVE_COMMENT",payload:o._id});expect(e).toEqual(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{comments:[]})}))})),describe("COMMENT_REPLY",(function(){var e=void 0;beforeEach((function(){e={_id:"678",parentComment:o._id,message:"comment reply",author:i,commentReplyVotes:[]}})),test("returns expected state when `ADD_COMMENT_REPLY` is passed",(function(){var t=Object(c.postDialogReducer)(l,{type:"ADD_COMMENT_REPLY",payload:{comment:e,parentCommentId:o._id}});expect(t).toEqual(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{comments:[Object(r.a)(Object(r.a)({},o),{},{commentReplies:1})],commentReplies:[e]})}))})),test("returns expected state when `REMOVE_COMMENT_REPLY` is passed",(function(){var t=Object(c.postDialogReducer)(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{commentReplies:[e],comments:[Object(r.a)(Object(r.a)({},o),{},{commentReplies:1})]})}),{type:"REMOVE_COMMENT_REPLY",payload:{commentReplyId:e._id,parentCommentId:o._id}});expect(t).toEqual(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{comments:[Object(r.a)(Object(r.a)({},o),{},{commentReplies:0})],commentReplies:[]})}))})),test("returns expected state when `VOTE_COMMENT_REPLY` is passed",(function(){var t=Object(c.postDialogReducer)(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{commentReplies:[e],comments:[Object(r.a)(Object(r.a)({},o),{},{commentReplies:1})]})}),{type:"VOTE_COMMENT_REPLY",payload:{commentReplyId:e._id,currentUser:i}});expect(t).toEqual(Object(r.a)(Object(r.a)({},l),{},{data:Object(r.a)(Object(r.a)({},l.data),{},{comments:[Object(r.a)(Object(r.a)({},o),{},{commentReplies:1})],commentReplies:[Object(r.a)(Object(r.a)({},e),{},{commentReplyVotes:[{author:i._id}]})]})}))}))})),test("returns expected state when `SET_REPLYING` is passed",(function(){var e=Object(c.postDialogReducer)(l,{type:"SET_REPLYING",payload:{username:i.username,commentId:o._id}});expect(e).toEqual(Object(r.a)(Object(r.a)({},l),{},{replying:{commentUser:i.username,commentId:o._id}}))}))},311:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(60),s=a(87),i=a(28),l={_id:"123",username:"test",bookmarks:[]},u={post:{_id:"123",image:"www.image.com",caption:"test",author:Object(n.a)({},l),postVotes:[{votes:[]}],date:Date.now()},token:"12345",currentUser:l,dispatch:jest.fn(),profileDispatch:jest.fn(),bookmarkPost:jest.fn()},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(i.c)(e),n=Object(o.shallow)(c.a.createElement(s.default,Object.assign({store:a},u,t))).dive();return n};test("renders without error",(function(){var e=m(),t=Object(i.b)(e,"component-post-dialog-stats");expect(t.exists()).toBeTruthy()})),test("does not throw error with expected props",(function(){var e=Object(i.a)(s.default,u);expect(e).toBeUndefined()})),test("calls dispatch when like button is clicked",(function(){var e=jest.fn(),t=m({},{dispatch:e});Object(i.b)(t,"component-like-button").simulate("click",{nativeEvent:{stopImmediatePropagation:jest.fn()}}),expect(e).toHaveBeenCalledTimes(1)}))},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(e){var t=e.children;return r.a.createElement("div",{className:"settings-form__form-group"},t)}},359:function(e,t){},36:function(e,t,a){"use strict";a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return f})),a.d(t,"c",(function(){return p})),a.d(t,"g",(function(){return h})),a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"d",(function(){return E})),a.d(t,"h",(function(){return v}));var n=a(1),r=a(2),c=a.n(r),o=a(3),s=a(12),i=a(162),l=a(37),u=a(109),m=a(59),d=function(){return function(e){localStorage.removeItem("token"),e(Object(i.b)()),e({type:s.a.SIGN_OUT})}},f=function(e,t,a){return function(){var n=Object(o.a)(c.a.mark((function n(r){var o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:s.a.SIGN_IN_START}),n.next=4,Object(u.c)(e,t,a);case 4:o=n.sent,r((i=o,localStorage.setItem("token",i.token),{type:s.a.SIGN_IN_SUCCESS,payload:i})),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),a&&r(d),r((c=n.t0.message,{type:s.a.SIGN_IN_FAILURE,payload:c}));case 12:case"end":return n.stop()}var c,i}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:s.a.GITHUB_SIGN_IN_START}),t.next=4,Object(u.b)(e);case 4:n=t.sent,localStorage.setItem("token",n.token),a({type:s.a.GITHUB_SIGN_IN_SUCCESS,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:s.a.GITHUB_SIGN_IN_FAILURE,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e,t,a,n){return function(){var r=Object(o.a)(c.a.mark((function r(o){var i;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o({type:s.a.SIGN_IN_START}),r.next=4,Object(u.d)(e,t,a,n);case 4:i=r.sent,o(f(null,null,i.token)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),o({type:s.a.SIGN_UP_FAILURE,payload:r.t0.message});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},b=function(e,t){return function(){var a=Object(o.a)(c.a.mark((function a(r){var o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(l.a)(e,t);case 3:o=a.sent,r({type:s.a.BOOKMARK_POST,payload:Object(n.a)(Object(n.a)({},o),{},{postId:e})}),a.next=10;break;case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},g=function(e,t){return function(){var a=Object(o.a)(c.a.mark((function a(n){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:s.a.CHANGE_AVATAR_START}),a.next=4,Object(m.a)(e,t);case 4:r=a.sent,n({type:s.a.CHANGE_AVATAR_SUCCESS,payload:r.avatar}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:s.a.CHANGE_AVATAR_FAILURE,payload:a.t0.message});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(o.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:s.a.REMOVE_AVATAR_START}),t.next=4,Object(m.d)(e);case 4:a({type:s.a.REMOVE_AVATAR_SUCCESS}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:s.a.REMOVE_AVATAR_FAILURE,payload:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e,t){return function(){var a=Object(o.a)(c.a.mark((function a(n){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:s.a.UPDATE_PROFILE_START}),a.next=4,Object(m.f)(e,t);case 4:r=a.sent,n({type:s.a.UPDATE_PROFILE_SUCCESS,payload:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:s.a.UPDATE_PROFILE_FAILURE,payload:a.t0.message});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}},37:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return f})),a.d(t,"f",(function(){return p})),a.d(t,"h",(function(){return h})),a.d(t,"d",(function(){return b}));var n=a(2),r=a.n(n),c=a(3),o=a(10),s=a.n(o),i=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/post/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:0,e.prev=1,e.next=4,s.a.get("/api/user/".concat(t,"/posts/").concat(a));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/post/".concat(t,"/vote"),null,{headers:{authorization:a}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/post",t,{headers:{authorization:a,"Content-Type":"multipart/form-data"}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.delete("/api/post/".concat(t),{headers:{authorization:a}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/user/".concat(t,"/bookmark"),null,{headers:{authorization:a}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/post/filters");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:0,e.prev=1,e.next=4,s.a.get("/api/post/suggested/"+a,{headers:{authorization:t}});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:0,e.prev=1,e.next=4,s.a.get("/api/post/hashtag/".concat(a,"/").concat(n),{headers:{authorization:t}});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()},396:function(e,t,a){var n={"./Alert/Alert":142,"./Alert/Alert.js":142,"./App/App":103,"./App/App.js":103,"./App/App.test":239,"./App/App.test.js":239,"./Avatar/Avatar":25,"./Avatar/Avatar.js":25,"./Button/Button":18,"./Button/Button.js":18,"./Button/FollowButton/FollowButton":69,"./Button/FollowButton/FollowButton.js":69,"./Button/TextButton/TextButton":16,"./Button/TextButton/TextButton.js":16,"./Card/Card":52,"./Card/Card.js":52,"./ChangeAvatarButton/ChangeAvatarButton":119,"./ChangeAvatarButton/ChangeAvatarButton.js":119,"./ChangePasswordForm/ChangePasswordForm":199,"./ChangePasswordForm/ChangePasswordForm.js":199,"./Comment/Comment":120,"./Comment/Comment.js":120,"./Comment/CommentReply/CommentReply":143,"./Comment/CommentReply/CommentReply.js":143,"./Divider/Divider":53,"./Divider/Divider.js":53,"./EditProfileForm/EditProfileForm":200,"./EditProfileForm/EditProfileForm.js":200,"./Feed/Feed":201,"./Feed/Feed.js":201,"./Feed/FeedBottom/FeedBottom":146,"./Feed/FeedBottom/FeedBottom.js":146,"./FilterSelector/FilterSelector":147,"./FilterSelector/FilterSelector.js":147,"./Footer/Footer":148,"./Footer/Footer.js":148,"./Footer/SmallFooter/SmallFooter":202,"./Footer/SmallFooter/SmallFooter.js":202,"./FormInput/FormInput":23,"./FormInput/FormInput.js":23,"./FormInput/FormInput.test":304,"./FormInput/FormInput.test.js":304,"./FormTextarea/FormTextarea":144,"./FormTextarea/FormTextarea.js":144,"./GithubLoginButton/GithubLoginButton":101,"./GithubLoginButton/GithubLoginButton.js":101,"./HashtagPosts/HashtagPosts":203,"./HashtagPosts/HashtagPosts.js":203,"./Header/Header":139,"./Header/Header.js":139,"./Header/MobileHeader/MobileHeader":57,"./Header/MobileHeader/MobileHeader.js":57,"./Icon/Icon":4,"./Icon/Icon.js":4,"./Icon/PulsatingIcon/PulsatingIcon":77,"./Icon/PulsatingIcon/PulsatingIcon.js":77,"./ImageGrid/ImageGrid":102,"./ImageGrid/ImageGrid.js":102,"./Loader/Loader":51,"./Loader/Loader.js":51,"./LoginCard/LoginCard":125,"./LoginCard/LoginCard.js":125,"./MobileNav/MobileNav":149,"./MobileNav/MobileNav.js":149,"./Modal/Modal":141,"./Modal/Modal.js":141,"./NewPost/NewPost":204,"./NewPost/NewPost.js":204,"./NewPost/NewPostButton/NewPostButton":91,"./NewPost/NewPostButton/NewPostButton.js":91,"./NewPost/NewPostEdit/NewPostEdit":305,"./NewPost/NewPostEdit/NewPostEdit.js":305,"./NewPost/NewPostFilter/NewPostFilter":151,"./NewPost/NewPostFilter/NewPostFilter.js":151,"./NewPost/NewPostForm/NewPostForm":150,"./NewPost/NewPostForm/NewPostForm.js":150,"./Notification/NotificationButton/NotificationButton":98,"./Notification/NotificationButton/NotificationButton.js":98,"./Notification/NotificationButton/NotificationPopup/NotificationPopup":140,"./Notification/NotificationButton/NotificationPopup/NotificationPopup.js":140,"./Notification/NotificationFeed/NotificationFeed":130,"./Notification/NotificationFeed/NotificationFeed.js":130,"./OptionsDialog/OptionsDialog":306,"./OptionsDialog/OptionsDialog.js":306,"./PopupCard/PopupCard":97,"./PopupCard/PopupCard.js":97,"./PostDialog/PostDialog":61,"./PostDialog/PostDialog.js":61,"./PostDialog/PostDialog.test":307,"./PostDialog/PostDialog.test.js":307,"./PostDialog/PostDialogCommentForm/PostDialogCommentForm":86,"./PostDialog/PostDialogCommentForm/PostDialogCommentForm.js":86,"./PostDialog/PostDialogCommentForm/PostDialogCommentForm.test":308,"./PostDialog/PostDialogCommentForm/PostDialogCommentForm.test.js":308,"./PostDialog/PostDialogCommentForm/postDialogCommentFormReducer":21,"./PostDialog/PostDialogCommentForm/postDialogCommentFormReducer.js":21,"./PostDialog/PostDialogCommentForm/postDialogCommentFormReducer.test":309,"./PostDialog/PostDialogCommentForm/postDialogCommentFormReducer.test.js":309,"./PostDialog/PostDialogReducer.test":310,"./PostDialog/PostDialogReducer.test.js":310,"./PostDialog/PostDialogStats/PostDialogStats":87,"./PostDialog/PostDialogStats/PostDialogStats.js":87,"./PostDialog/PostDialogStats/PostDialogStats.test":311,"./PostDialog/PostDialogStats/PostDialogStats.test.js":311,"./PostDialog/postDialogReducer":29,"./PostDialog/postDialogReducer.js":29,"./PreviewImage/PreviewImage":95,"./PreviewImage/PreviewImage.js":95,"./ProfileCategory/ProfileCategory":205,"./ProfileCategory/ProfileCategory.js":205,"./ProtectedRoute/ProtectedRoute":68,"./ProtectedRoute/ProtectedRoute.js":68,"./SearchBox/SearchBox":96,"./SearchBox/SearchBox.js":96,"./SearchSuggestion/SearchSuggestion":145,"./SearchSuggestion/SearchSuggestion.js":145,"./SettingsButton/SettingsButton":198,"./SettingsButton/SettingsButton.js":198,"./SettingsForm/SettingsForm":99,"./SettingsForm/SettingsForm.js":99,"./SettingsForm/SettingsFormGroup/SettingsFormGroup":32,"./SettingsForm/SettingsFormGroup/SettingsFormGroup.js":32,"./SignUpCard/SignUpCard":206,"./SignUpCard/SignUpCard.js":206,"./SkeletonLoader/SkeletonLoader":27,"./SkeletonLoader/SkeletonLoader.js":27,"./SuggestedPosts/SuggestedPosts":207,"./SuggestedPosts/SuggestedPosts.js":207,"./Suggestion/SuggestedUsers/SuggestedUsers":208,"./Suggestion/SuggestedUsers/SuggestedUsers.js":208,"./Suggestion/SuggestionCard/SuggestionCard":152,"./Suggestion/SuggestionCard/SuggestionCard.js":152,"./UnfollowPrompt/UnfollowPrompt":131,"./UnfollowPrompt/UnfollowPrompt.js":131,"./UserCard/UserCard":41,"./UserCard/UserCard.js":41,"./UsersList/UsersList":209,"./UsersList/UsersList.js":209,"./UsersList/UsersListSkeleton/UsersListSkeleton":54,"./UsersList/UsersListSkeleton/UsersListSkeleton.js":54,"./UsersList/usersListReducer":121,"./UsersList/usersListReducer.js":121,"./ViewOnGithubButton/ViewOnGithubButton":100,"./ViewOnGithubButton/ViewOnGithubButton.js":100};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=396},4:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(0),c=a.n(r),o=a(14),s=a.n(o),i=a(38);t.default=function(e){var t=e.onClick,a=e.className,r=e.icon,o=e.style,l=s()(Object(n.a)({icon:!0},a,a));return c.a.createElement(i.a.div,{style:o,onClick:t,className:l},c.a.createElement("ion-icon",{size:"small",name:r}))}},401:function(e,t){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a(7),s=a(14),i=a.n(s),l=a(22),u=a(63),m=a(25);t.default=Object(c.b)(null,(function(e){return{hideModal:function(t){return e(Object(l.a)(t))}}}))((function(e){var t=e.avatar,a=e.username,n=e.subText,c=e.subTextDark,s=e.date,l=e.style,d=e.hideModal,f=e.onClick,p=e.children,h=e.avatarMedium,b=i()({"avatar--small":!h,"avatar--medium":h});return r.a.createElement("div",{className:"user-card",style:l},f?r.a.createElement(m.default,{onClick:function(){return f()},className:b,imageSrc:t,style:{cursor:"pointer"}}):r.a.createElement(o.b,{style:{display:"flex"},onClick:function(){return d("OptionsDialog")},to:"/".concat(a)},r.a.createElement(m.default,{className:b,imageSrc:t})),r.a.createElement("div",{className:"user-card__details"},f?r.a.createElement("p",{onClick:function(){return f()},style:{cursor:"pointer"},className:"heading-4 font-bold"},a):r.a.createElement(o.b,{onClick:function(){return d("OptionsDialog")},style:{textDecoration:"none"},to:"/".concat(a)},r.a.createElement("p",{className:"heading-4 font-bold"},a)),n&&r.a.createElement("p",{className:"heading-4 ".concat(c?"color-black":"color-grey")},n,s&&r.a.createElement("span",{className:"color-grey ml-sm"},Object(u.b)(s)))),p)}))},42:function(e,t,a){"use strict";t.a={ADD_NOTIFICATION:"ADD_NOTIFICATION",FETCH_NOTIFICATIONS_START:"FETCH_NOTIFICATIONS_START",FETCH_NOTIFICATIONS_SUCCESS:"FETCH_NOTIFICATIONS_SUCCESS",FETCH_NOTIFICATIONS_FAILURE:"FETCH_NOTIFICATIONS_FAILURE",READ_NOTIFICATIONS:"READ_NOTIFICATIONS",CLEAR_NOTIFICATIONS:"CLEAR_NOTIFICATIONS"}},43:function(e,t,a){"use strict";t.a={FETCH_POSTS_START:"FETCH_POSTS",FETCH_POSTS_FAILURE:"FETCH_POSTS_FAILURE",FETCH_POSTS_SUCCESS:"FETCH_POSTS_SUCCESS",ADD_POST:"ADD_POST",REMOVE_POST:"REMOVE_POST",CLEAR_POSTS:"CLEAR_POSTS"}},49:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return i}));var n=function(e){return(!e||!e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))&&"Enter a valid email address."},r=function(e){return!e&&"Enter a valid name."},c=function(e){return e?e.length>30||e.length<3?"Please choose a username between 3 and 30 characters.":!e.match(/^[a-zA-Z0-9\_.]+$/)&&"A username can only contain the following: letters A-Z, numbers 0-9 and the symbols _ . ":"Enter a valid username."},o=function(e){return e?e.length<6?"For security purposes we require a password to be at least 6 characters.":!e.match(/^(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9])(?=.*[a-z]).{6,}$/)&&"A password needs to have at least one uppercase letter, one lowercase letter, one special character and one number.":"Enter a valid password."},s=function(e){return e.length>130&&"Your bio has to be 120 characters or less."},i=function(e){return!(!e||e.match(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/))&&"Please provide a valid website."}},51:function(e,t,a){"use strict";a.r(t);var n,r,c,o,s,i,l,u,m=a(0),d=a.n(m);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function h(e,t){var a=e.title,d=e.titleId,h=p(e,["title","titleId"]);return m.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"30px",height:"30px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":d},h),a?m.createElement("title",{id:d},a):null,n||(n=m.createElement("g",{transform:"translate(76,50)"},m.createElement("g",{transform:"rotate(0)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:1,transform:"scale(1.13887 1.13887)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.875s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.875s"}))))),r||(r=m.createElement("g",{transform:"translate(68.38477631085024,68.38477631085024)"},m.createElement("g",{transform:"rotate(45)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.875,transform:"scale(1.20137 1.20137)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.75s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.75s"}))))),c||(c=m.createElement("g",{transform:"translate(50,76)"},m.createElement("g",{transform:"rotate(90)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.75,transform:"scale(1.26387 1.26387)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.625s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.625s"}))))),o||(o=m.createElement("g",{transform:"translate(31.615223689149765,68.38477631085024)"},m.createElement("g",{transform:"rotate(135)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.625,transform:"scale(1.32637 1.32637)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.5s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.5s"}))))),s||(s=m.createElement("g",{transform:"translate(24,50)"},m.createElement("g",{transform:"rotate(180)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.5,transform:"scale(1.38887 1.38887)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.375s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.375s"}))))),i||(i=m.createElement("g",{transform:"translate(31.61522368914976,31.615223689149765)"},m.createElement("g",{transform:"rotate(225)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.375,transform:"scale(1.45137 1.45137)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.25s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.25s"}))))),l||(l=m.createElement("g",{transform:"translate(49.99999999999999,24)"},m.createElement("g",{transform:"rotate(270)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.25,transform:"scale(1.01387 1.01387)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.125s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.125s"}))))),u||(u=m.createElement("g",{transform:"translate(68.38477631085023,31.61522368914976)"},m.createElement("g",{transform:"rotate(315)"},m.createElement("circle",{cx:0,cy:0,r:6,fill:"#ffffff",fillOpacity:.125,transform:"scale(1.07637 1.07637)"},m.createElement("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"0s"}))))))}var b=m.forwardRef(h);a.p,t.default=function(){return d.a.createElement("div",{className:"loader"},d.a.createElement(b,{className:"loader__svg"}))}},517:function(e,t,a){},518:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(85),o=a.n(c),s=a(103);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(7),l=a(8),u=a(156);a(517);o.a.render(r.a.createElement(l.a,{store:u.a},r.a.createElement(i.a,null,r.a.createElement(s.default,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(0),c=a.n(r),o=a(14),s=a.n(o);t.default=function(e){var t=e.className,a=e.style,r=e.children,o=s()(Object(n.a)({card:!0},t,t));return c.a.createElement("div",{className:o,style:a},r)}},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(e){var t=e.children;return r.a.createElement("h4",{className:"heading-4 color-grey ".concat(t?"divider--split":"divider")},t)}},54:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(27);t.default=function(e){var t=e.amount,a=void 0===t?3:t,s=e.style;return c.a.createElement(r.Fragment,null,function(){for(var e=[],t=0;t<a;t++)e.push(c.a.createElement("div",{key:t,style:Object(n.a)({display:"flex",alignItems:"center",padding:"0.5rem 1.5rem"},s)},c.a.createElement(o.default,{style:{width:"40px",height:"40px",borderRadius:"100px"}}),c.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.a.createElement(o.default,{style:{width:"10rem",height:"1rem",marginLeft:"1rem",marginBottom:"5px"}}),c.a.createElement(o.default,{style:{width:"15rem",height:"1rem",marginLeft:"1rem"}}))));return e}())}},57:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(8),s=a(9),i=a(24),l=a(11),u=a(4),m=a(18),d=a(16),f=Object(s.b)({currentUser:l.a});t.default=Object(o.b)(f)((function(e){var t=e.children,a=e.backArrow,o=e.style,s=e.show,l=e.currentUser,f=Object(i.g)();return c.a.createElement("header",{style:Object(n.a)(Object(n.a)({},o),{},{display:"".concat(s&&"grid")}),className:"header--mobile"},l?c.a.createElement(r.Fragment,null,a&&c.a.createElement(u.default,{onClick:function(){return f.goBack()},style:{cursor:"pointer"},icon:"chevron-back"}),t):c.a.createElement(r.Fragment,null,c.a.createElement("h3",{style:{fontSize:"2.5rem"},className:"heading-logo"},"Timcha"),c.a.createElement("div",{style:{gridColumn:"-1"}},c.a.createElement(m.default,{onClick:function(){return f.push("/")},style:{marginRight:"1rem"}},"Log In"),c.a.createElement(d.default,{onClick:function(){return f.push("/signup")},bold:!0,blue:!0},"Sign Up"))))}))},58:function(e,t,a){"use strict";var n=a(15),r=a(0),c=a(315),o=a.n(c),s=function(e){return e.scrollTop};t.a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=t||document.documentElement,i=Object(r.useRef)(s(c));Object(r.useEffect)((function(){var a=o()((function(){i.current=s(c),e({currentScrollPosition:i.current,atBottom:c.scrollHeight-c.scrollTop-c.clientHeight<1e3})}),200);return t?t.addEventListener("scroll",a):window.addEventListener("scroll",a),function(){t?t.removeEventListener("scroll",a):window.removeEventListener("scroll",a)}}),[].concat(Object(n.a)(a),[t,c,e]))}},59:function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"c",(function(){return p}));var n=a(1),r=a(2),c=a.n(r),o=a(3),s=a(10),i=a.n(s),l=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:0,e.prev=1,e.next=4,i.a.get("/api/user/".concat(t,"/").concat(a,"/search"));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.put("/api/user/confirm",{token:a},{headers:{authorization:t}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t),e.prev=2,e.next=5,i.a.put("/api/user/avatar",n,{headers:{"Content-Type":"multipart/form-data",authorization:a}});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),new Error(e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i.a.delete("/api/user/avatar",{headers:{authorization:t}}),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.put("/api/user",Object(n.a)({},a),{headers:{authorization:t}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/api/user/suggested/".concat(a||""),{headers:{authorization:t}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},61:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(2),c=a.n(r),o=a(3),s=a(5),i=a(0),l=a.n(i),u=a(8),m=a(9),d=a(14),f=a.n(d),p=a(24),h=a(7),b=a(11),g=a(22),E=a(30),v=a(37),O=a(31),j=a(25),y=a(4),_=a(27),w=a(120),N=a(86),S=a(87),T=a(29),C=(a(137),a(303),a(321)),k=a.n(C),I=function(e){var t=e.postId,a=e.token,r=e.currentUser,u=e.profileDispatch,m=e.showModal,d=e.hideModal,b=e.showAlert,g=e.style,E=e.className,C=e.postData,I=e.loading,x=e.simple,A=Object(i.useRef)(),R=Object(i.useReducer)(T.postDialogReducer,T.INITIAL_STATE),P=Object(s.a)(R,2),F=P[0],D=P[1],U=Object(p.g)(),M=void 0!==I?I:F.fetching;Object(i.useEffect)((function(){return I||(C?D({type:"FETCH_POST_SUCCESS",payload:C}):(window.history.pushState({prevUrl:window.location.href},null,"/post/".concat(t)),Object(o.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.e)(t);case 3:a=e.sent,D({type:"FETCH_POST_SUCCESS",payload:a}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),U.push("/"),D({type:"FETCH_POST_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))())),function(){window.history.state&&window.history.state.prevUrl&&window.history.pushState("profile","Profile",window.history.state.prevUrl)}}),[t,U,I,C]);var L=function(){var e=Object(o.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.f)(t,F.data.comments.length,F.localStateComments.size);case 3:a=e.sent,D({type:"ADD_COMMENT",payload:a.comments}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b("Unable to fetch additional comments.",(function(){return L()}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.c)(t,a);case 3:u&&u({type:"DELETE_POST",payload:t}),d("PostDialog/PostDialog"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b("Unable to delete post.",(function(){return H()}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:f()(Object(n.a)({"post-dialog":!0,"post-dialog--simple":x},E,E)),"data-test":"component-post-dialog",style:g},l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:f()({"post-dialog__image":!0,"post-dialog__image--simple":x})},M?l.a.createElement(_.default,{animated:!0}):l.a.createElement(k.a,{"data-src":F.data.image,src:"https://cdn.jsdelivr.net/gh/chawaa/timcha@master/img/placeholder.gif",alt:"Post",set:[{src:F.data.image}],style:{filter:F.data.filter},zIndex:19260817,class:"lazyload"})),l.a.createElement("header",{className:f()({"post-dialog__header":!0,"post-dialog__header--simple":x})},M?l.a.createElement(_.default,{style:{height:"4rem",width:"4rem",borderRadius:"100px"}}):l.a.createElement(h.b,{to:"/".concat(F.data.author.username),style:{display:"flex"}},l.a.createElement(j.default,{className:"avatar--small",imageSrc:F.data.author.avatar})),M?l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement(_.default,{style:{height:"1rem",width:"10rem"}}),l.a.createElement(_.default,{style:{height:"1rem",width:"15rem",marginTop:"5px"}})):l.a.createElement(h.b,{style:{textDecoration:"none"},to:"/".concat(F.data.author.username)},l.a.createElement("p",{className:"heading-4 heading-4--bold"},l.a.createElement("b",null,F.data.author.username))),!M&&l.a.createElement("div",{onClick:function(){var e=[{text:"\u524d\u5f80\u4f5c\u54c1",onClick:function(){d("PostDialog/PostDialog"),U.push("/post/".concat(t))}},{text:"\u590d\u5236\u94fe\u63a5",onClick:function(){navigator.clipboard.writeText(document.URL).then((function(){return b("Link copied to clipboard.")})).catch((function(){return b("Could not copy link to clipboard.")}))}}];m({options:r&&r.username===F.data.author.username?[].concat(e,[{text:"\u5220\u9664\u4f5c\u54c1",warning:!0,onClick:function(){H(),U.push("/"+r.username)}}]):e},"OptionsDialog/OptionsDialog")},style:{cursor:"pointer"},className:"post-dialog__more"},l.a.createElement(y.default,{className:"icon--small",icon:"ellipsis-horizontal"}))),l.a.createElement("div",{"data-test":"component-post-dialog-content",className:f()({"post-dialog__content":!0,"post-dialog__content--simple":x})},l.a.createElement("div",{ref:A,className:f()({comments:!0,"comments--simple":x})},F.data.caption&&!M?l.a.createElement(w.default,{comment:{message:F.data.caption,avatar:F.data.author.avatar,username:F.data.author.username},currentUser:r,token:a,post:F.data,caption:!0,simple:x}):null,!M&&F.data.comments.map((function(e,t){return l.a.createElement(w.default,{comment:e,currentUser:r,token:a,post:F.data,key:t,dialogDispatch:D,profileDispatch:u,simple:x})})),!C&&F.data.comments.length-F.localStateComments.size<F.data.commentCount-F.localStateComments.size&&l.a.createElement("div",{style:{padding:"2rem",cursor:"pointer"},onClick:function(){return L()}},l.a.createElement(y.default,{style:{margin:"0 auto"},icon:"add-circle-outline"}))),M?l.a.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"2rem 2rem 6rem 2rem"}},l.a.createElement(_.default,{style:{height:"1.5rem",width:"15rem"}}),l.a.createElement(_.default,{style:{height:"1.5rem",width:"20rem",marginTop:"1rem"}}),l.a.createElement(_.default,{style:{height:"1.5rem",width:"10rem",marginTop:"1rem"}})):l.a.createElement(S.default,{currentUser:r,token:a,post:F.data,dispatch:D,profileDispatch:u,simple:x}),!M&&l.a.createElement(N.default,{postId:t,token:a,currentUser:r,commentsRef:A,dialogDispatch:D,profileDispatch:u,replying:F.replying}))))},x=Object(m.b)({token:b.e,currentUser:b.a});I.whyDidYouRender=!0,t.default=Object(u.b)(x,(function(e){return{showModal:function(t,a){return e(Object(g.b)(t,a))},hideModal:function(t){return e(Object(g.a)(t))},showAlert:function(t,a){return e(Object(E.a)(t,a))}}}))(I)},63:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a(520),r=a(519),c=function(e){var t=Object(n.a)(new Date,new Date(e)).split(" ");return t[1]=t[1].substring(0,1),"s"===t[1]?"Just now":t.join(" ")},o=function(e){return e=new Date(e),Object(r.a)(e,"MMMM d")}},65:function(e,t,a){"use strict";t.a={SHOW_ALERT:"SHOW_ALERT",HIDE_ALERT:"HIDE_ALERT",SET_ALERT_TIMEOUT_ID:"SET_ALERT_TIMEOUT_ID"}},68:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a(0),c=a.n(r),o=a(8),s=a(9),i=a(24),l=a(11),u=Object(s.b)({token:l.e});t.default=Object(o.b)(u)((function(e){var t=e.token,a=e.children,r=Object(n.a)(e,["token","children"]);return c.a.createElement(i.b,r,t?a:c.a.createElement(i.a,{to:"/login"}))}))},69:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(8),u=a(9),m=a(11),d=a(22),f=a(30),p=a(88),h=a(18),b=a(131),g=Object(u.b)({currentUser:m.a,token:m.e});t.default=Object(l.b)(g,(function(e){return{showModal:function(t,a){return e(Object(d.b)(t,a))},showAlert:function(t,a){return e(Object(f.a)(t,a))}}}))((function(e){var t=e.userId,a=e.token,n=e.currentUser,l=e.showModal,u=e.following,m=e.username,d=e.avatar,f=e.showAlert,g=e.style,E=Object(s.useState)(u),v=Object(o.a)(E,2),O=v[0],j=v[1],y=Object(s.useState)(!1),_=Object(o.a)(y,2),w=_[0],N=_[1],S=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,Object(p.a)(t,a);case 4:j(!O),N(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),N(!1),f("Could not follow the user.",(function(){return S()}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return m===n.username?i.a.createElement(h.default,{disabled:!0},"Follow"):O?i.a.createElement(h.default,{style:g,loading:w,onClick:function(){return l({options:[{warning:!0,text:"Unfollow",onClick:function(){return S()}}],children:i.a.createElement(b.default,{avatar:d,username:m})},"OptionsDialog/OptionsDialog")},inverted:!0},"Following"):i.a.createElement(h.default,{style:g,loading:w,onClick:function(){return S()}},"Follow")}))},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),o=a(4);t.default=function(e){var t=e.toggle,a=e.constantProps,s=void 0===a?{}:a,i=e.toggledProps,l=e.elementRef,u=Object(c.b)(t,null,{from:{transform:"scale(1.3)"},enter:{transform:"scale(1)"},leave:{display:"none"},config:{mass:1,tension:500,friction:20},immediate:!l.current});return r.a.createElement(n.Fragment,null,u.map((function(e){var t=e.item,a=e.key,n=e.props;return t?r.a.createElement(o.default,Object.assign({},s,i[0],{style:n,key:a})):r.a.createElement(o.default,Object.assign({},s,i[1],{style:n,key:a}))})))}},79:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return p}));var n=a(2),r=a.n(n),c=a(3),o=a(42),s=a(10),i=a.n(s),l=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/api/notification",{headers:{authorization:t}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.put("/api/notification",null,{headers:{authorization:t}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0.response.data);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return{type:o.a.ADD_NOTIFICATION,payload:e}},d=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.a.FETCH_NOTIFICATIONS_START}),t.next=4,l(e);case 4:n=t.sent,a({type:o.a.FETCH_NOTIFICATIONS_SUCCESS,payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:o.a.FETCH_NOTIFICATIONS_FAILURE,payload:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.a.READ_NOTIFICATIONS}),t.next=4,u(e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.warn(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},p=function(){return{type:o.a.CLEAR_NOTIFICATIONS}}},86:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(5),s=a(0),i=a.n(s),l=a(7),u=a(31),m=a(21),d=a(155),f=a(51),p=a(145);t.default=function(e){var t=e.token,a=e.postId,n=e.commentsRef,h=e.dialogDispatch,b=e.profileDispatch,g=e.replying,E=e.currentUser,v=Object(s.useReducer)(m.postDialogCommentFormReducer,m.INITIAL_STATE),O=Object(o.a)(v,2),j=O[0],y=O[1],_=Object(s.useState)(null),w=Object(o.a)(_,2),N=w[0],S=w[1],T=Object(d.a)(),C=T.handleSearchDebouncedRef,k=T.result,I=T.setResult,x=T.fetching,A=T.setFetching,R=Object(s.useRef)();Object(s.useEffect)((function(){g&&R.current&&(R.current.value="@".concat(g.commentUser," "),R.current.focus())}),[g]);var P=function(){var e=Object(c.a)(r.a.mark((function e(c){var o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),0!==j.comment.length){e.next=3;break}return e.abrupt("return",y({type:"POST_COMMENT_FAILURE",payload:"You cannot post an empty comment."}));case 3:if(e.prev=3,I(null),y({type:"POST_COMMENT_START"}),g){e.next=14;break}return e.next=9,Object(u.a)(j.comment,a,t);case 9:o=e.sent,y({type:"POST_COMMENT_SUCCESS",payload:{comment:o,dispatch:h,postId:a}}),n.current.scrollTop=n.current.scrollHeight,e.next=19;break;case 14:return e.next=16,Object(u.b)(j.comment,g.commentId,t);case 16:s=e.sent,y({type:"POST_COMMENT_REPLY_SUCCESS",payload:{comment:s,dispatch:h,parentCommentId:g.commentId}}),h({type:"SET_REPLYING"});case 19:b&&b({type:"INCREMENT_POST_COMMENTS_COUNT",payload:a}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),y({type:"POST_COMMENT_FAILURE",payload:e.t0});case 25:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("form",{onSubmit:function(e){return P(e)},className:"post-dialog__add-comment","data-test":"component-post-dialog-add-comment"},i.a.createElement(s.Fragment,null,E?i.a.createElement(s.Fragment,null,j.posting&&i.a.createElement(f.default,null),i.a.createElement("input",{className:"add-comment__input",type:"text",placeholder:"Add a comment...",onChange:function(e){g&&!e.target.value&&h({type:"SET_REPLYING"}),y({type:"SET_COMMENT",payload:e.target.value});var t=e.target.value.match(new RegExp(/@[a-zA-Z0-9]+$/));t?S((function(){A(!0);var e=t[0].substring(1);return I([]),C(e),e})):I(null)},value:j.comment,ref:R,"data-test":"component-add-comment-input"}),i.a.createElement("button",{type:"submit",className:"heading-3 heading--button font-bold color-blue"},"Post")):i.a.createElement(s.Fragment,null,i.a.createElement("h4",{className:"heading-4 font-medium color-grey"},i.a.createElement("span",null,i.a.createElement(l.b,{to:"/login",className:"link"},"Log in")," "),"to like or comment."))),k&&i.a.createElement(p.default,{fetching:x,result:k,username:N,onClick:function(e){var t=R.current.value;y({type:"SET_COMMENT",payload:t.replace(/@\b(\w+)$/,"@".concat(e.username," "))}),R.current.focus(),I(null)}}))}},87:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(3),o=a(0),s=a.n(o),i=a(8),l=a(14),u=a.n(l),m=a(36),d=a(30),f=a(22),p=a(63),h=a(37),b=a(4),g=a(77),E=a(125);t.default=Object(i.b)(null,(function(e){return{bookmarkPost:function(t,a){return e(Object(m.a)(t,a))},showAlert:function(t,a){return e(Object(d.a)(t,a))},showModal:function(t,a){return e(Object(f.b)(t,a))},hideModal:function(t){return e(Object(f.a)(t))}}}))((function(e){var t=e.currentUser,a=e.post,n=e.token,i=e.dispatch,l=e.profileDispatch,m=e.bookmarkPost,d=e.showAlert,f=e.showModal,v=e.hideModal,O=e.simple,j=Object(o.useRef)(),y=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",f({children:s.a.createElement(E.default,{onClick:function(){return v("Card/Card")},modal:!0}),style:{gridColumn:"center-start / center-end",justifySelf:"center",width:"40rem"}},"Card/Card"));case 2:return i({type:"VOTE_POST",payload:{currentUser:t,postId:a._id,dispatch:l}}),e.prev=3,e.next=6,Object(h.i)(a._id,n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),d("Could not vote on the post.",(function(){return y()}));case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),_=u()({"post-dialog__stats":!0,"post-dialog__stats--simple":O});return s.a.createElement("div",{ref:j,className:_,"data-test":"component-post-dialog-stats"},s.a.createElement("div",{className:"post-dialog__actions"},t?s.a.createElement(g.default,{toggle:!!a.postVotes.find((function(e){return e.author===t._id})),elementRef:j,constantProps:{onClick:function(){return y()}},toggledProps:[{className:"icon--button post-dialog__like color-red",icon:"heart"},{className:"icon--button post-dialog__like",icon:"heart-outline"}]}):s.a.createElement(b.default,{onClick:function(){return y()},icon:"heart-outline",className:"icon--button post-dialog__like"}),s.a.createElement(b.default,{onClick:function(){return t&&document.querySelector(".add-comment__input").focus()},className:"icon--button",icon:"chatbubble-outline"}),s.a.createElement(b.default,{className:"icon--button",icon:"paper-plane-outline"}),s.a.createElement(b.default,{className:"icon--button",onClick:function(){return m(a._id,n)},icon:t&&t.bookmarks&&t.bookmarks.find((function(e){return e.post===a._id}))?"bookmark":"bookmark-outline"})),s.a.createElement("p",{className:"heading-4"},0===a.postVotes.length?s.a.createElement("span",null,"Be the first to"," ",s.a.createElement("b",{style:{cursor:"pointer"},onClick:function(e){e.nativeEvent.stopImmediatePropagation(),y()},"data-test":"component-like-button"},"like this")):s.a.createElement("span",null,s.a.createElement("b",null,a.postVotes.length," ",1===a.postVotes.length?"like":"likes"))),s.a.createElement("p",{className:"heading-5 color-light uppercase"},Object(p.a)(a.date)))}))},88:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return m}));var n=a(2),r=a.n(n),c=a(3),o=a(10),s=a.n(o),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/user/".concat(t),a&&{headers:{authorization:a}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/user/".concat(t,"/follow"),null,{headers:{authorization:a}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t,a,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/user/".concat(t,"/").concat(a,"/following"),{headers:{authorization:n}});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,a,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/user/".concat(t,"/").concat(a,"/followers"),{headers:{authorization:n}});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},91:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(5),c=a(0),o=a.n(c),s=a(24),i=a(8),l=a(22),u=a(4);t.default=Object(i.b)(null,(function(e){return{showModal:function(t,a){return e(Object(l.b)(t,a))},hideModal:function(t){return e(Object(l.a)(t))}}}))((function(e){var t=e.showModal,a=e.hideModal,i=e.plusIcon,l=e.children,m=e.style,d=Object(c.useState)(void 0),f=Object(r.a)(d,2),p=f[0],h=f[1],b=Object(c.useRef)(),g=Object(s.g)();return Object(c.useEffect)((function(){p&&(window.outerWidth>600?t({file:p,hide:function(){return a("NewPost/NewPost")}},"NewPost/NewPost"):g.push("/new",{file:p}),b.current.value="")}),[p,t,a,g]),o.a.createElement(c.Fragment,null,o.a.createElement("label",{style:Object(n.a)({cursor:"pointer"},m),className:"icon",htmlFor:"file-upload"},l||o.a.createElement(u.default,{icon:i?"add-circle-outline":"camera-outline"})),o.a.createElement("input",{id:"file-upload",type:"file",style:{display:"none"},accept:"image/*",onChange:function(e){return h(e.target.files[0])},ref:b}))}))},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4);a(137),a(303);t.default=function(e){var t=e.onClick,a=e.image,n=e.likes,o=e.comments,s=e.filter;return r.a.createElement("figure",{onClick:t,key:a,className:"preview-image"},r.a.createElement("img",{src:"https://cdn.jsdelivr.net/gh/chawaa/timcha@master/img/loading.jpg","data-src":a,alt:"User post",style:{filter:s},class:"lazyload"}),r.a.createElement("div",{className:"preview-image__overlay"},r.a.createElement("span",{className:"preview-image__content"},n>0&&r.a.createElement("div",{className:"preview-image__icon"},r.a.createElement(c.default,{icon:"heart",className:"icon--white"}),r.a.createElement("span",null,n)),r.a.createElement("div",{className:"preview-image__icon"},r.a.createElement(c.default,{icon:"chatbubbles",className:"icon--white"}),r.a.createElement("span",null,o)))))}},96:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),c=a.n(r),o=a(24),s=a(155),i=a(4),l=a(97),u=a(41),m=a(53),d=a(51);t.default=function(e){var t=e.style,a=e.setResult,f=e.onClick,p=Object(r.useState)(""),h=Object(n.a)(p,2),b=h[0],g=h[1],E=Object(s.a)(),v=E.handleSearchDebouncedRef,O=E.result,j=E.fetching,y=E.setFetching,_=Object(o.g)();return Object(r.useEffect)((function(){O.length>0&&a&&a(O)}),[O,a]),c.a.createElement(r.Fragment,null,c.a.createElement("form",{className:"search-box",style:t,onSubmit:function(e){return e.preventDefault()}},c.a.createElement("input",{onChange:function(e){v(e.target.value),g(e.target.value),e.target.value&&y(!0)},onClick:f,value:b,className:"search-box__input",placeholder:"Search"}),c.a.createElement("span",{className:"search-box__placeholder"},c.a.createElement(i.default,{icon:"search",className:"icon--tiny color-grey"}),j&&c.a.createElement(d.default,null))),b&&!j&&!a&&c.a.createElement(l.default,{hide:function(){return g("")}},0!==O.length||j?O&&O.map((function(e,t){return c.a.createElement(r.Fragment,{key:t},c.a.createElement(u.default,{avatar:e.avatar,username:e.username,subText:e.fullName,style:{padding:"1.5rem 1.5rem"},onClick:function(){_.push("/".concat(e.username)),g("")}}),O.length!==t+1&&c.a.createElement(m.default,null))})):c.a.createElement("h3",{style:{padding:"1rem 0"},className:"heading-3 color-grey font-medium text-center"},"No results found.")))}},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),s=a(52);t.default=function(e){var t=e.children,a=e.hide,c=e.leftAlign;return Object(n.useEffect)((function(){return a&&window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}),[a]),r.a.createElement(s.default,{className:o()({"popup-card":!0,"popup-card--left-align":c})},r.a.createElement("ul",{style:{listStyleType:"none",maxHeight:"30rem",overflowY:"auto",backgroundColor:"white"},onClick:function(e){return e.stopPropagation()}},t))}},98:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),c=a.n(r),o=a(8),s=a(9),i=a(38),l=a(111),u=a(4),m=a(140),d=a(97),f=a(130),p=Object(s.b)({notifications:l.b,notificationState:l.a});t.default=Object(o.b)(p)((function(e){var t=e.notifications,a=e.notificationState,o=e.mobile,s=e.icon,l=Object(r.useState)(!1),p=Object(n.a)(l,2),h=p[0],b=p[1],g=Object(r.useState)(!1),E=Object(n.a)(g,2),v=E[0],O=E[1],j=Object(r.useState)(null),y=Object(n.a)(j,2),_=y[0],w=y[1];Object(r.useEffect)((function(){_&&clearTimeout(_),a.unreadCount>0&&(!v&&O(!0),w(setTimeout((function(){return O(!1)}),1e4)))}),[a.unreadCount]),Object(r.useEffect)((function(){h&&(clearTimeout(_),O(!1))}),[h,_]);var N=Object(i.b)(!!(a.unreadCount>0&&v)&&{notifications:t},null,{from:{transform:"scale(0) translateX(-50%)",opacity:0},enter:{transform:"scale(1) translateX(-50%)",opacity:1},leave:{transform:"scale(0) translateX(-50%)",opacity:0},config:{tension:280,friction:20}});return c.a.createElement("div",{style:{position:"relative",height:"100%"}},c.a.createElement("button",{className:"notification-button"},c.a.createElement(u.default,{icon:s||(h?"heart":"heart-outline"),className:a.unreadCount>0?"icon--unread":"",onClick:function(){return!o&&b((function(e){return!e}))},style:{cursor:"pointer"}}),N.map((function(e){var t=e.item,a=e.key,n=e.props;return t&&c.a.createElement(m.default,{style:n,notifications:t.notifications,key:a})}))),h&&!o&&c.a.createElement(d.default,{hide:function(){return b(!1)},leftAlign:!0},c.a.createElement(f.default,{setShowNotifications:b})))}))},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(e){var t=e.onSubmit,a=e.children;return r.a.createElement("form",{className:"settings-form",onSubmit:t},a)}}},[[518,1,2]]]);
//# sourceMappingURL=main.57f2824e.chunk.js.map