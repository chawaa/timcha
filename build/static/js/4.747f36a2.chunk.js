(this.webpackJsonpinstaclone=this.webpackJsonpinstaclone||[]).push([[4,10],{522:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(7);a.default=function(){return r.a.createElement("main",{className:"not-found-page grid"},r.a.createElement("div",{style:{gridColumn:"center-start / center-end",textAlign:"center",padding:"0 2rem"}},r.a.createElement("h1",{className:"heading-1"},"Sorry, this page isn't available."),r.a.createElement("h3",{className:"heading-3 font-medium"},"The link you followed may be broken, or the page may have been removed."," ",r.a.createElement(l.b,{to:"/",className:"link"},"Go back to Timcha."))))}},532:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),l=t(3),o=t(5),c=t(0),s=t.n(c),i=t(8),d=t(9),u=t(24),m=t(11),f=t(15),p=t(1),E={fetching:!0,following:!1,fetchingAdditionalPosts:!1,error:!1,data:{posts:[]}},O=function(e,a){switch(a.type){case"FETCH_PROFILE_START":return Object(p.a)(Object(p.a)({},e),{},{fetching:!0,error:!1});case"FETCH_PROFILE_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{fetching:!1,error:a.payload});case"FETCH_PROFILE_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{fetching:!1,error:!1,data:Object(p.a)(Object(p.a)({},a.payload),{},{posts:a.payload.posts?a.payload.posts.data:[],postCount:a.payload.posts?a.payload.posts.postCount:0})});case"FETCH_ADDITIONAL_POSTS_START":return Object(p.a)(Object(p.a)({},e),{},{fetchingAdditionalPosts:!0});case"FETCH_ADDITIONAL_POSTS_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{fetchingAdditionalPosts:!1,error:a.payload});case"FETCH_ADDITIONAL_POSTS_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{fetchingAdditionalPosts:!1,error:!1});case"SET_POST_VOTES_COUNT":var t=a.payload,n=t.postId,r=t.votes,l=JSON.parse(JSON.stringify(e.data.posts)),o=l.findIndex((function(e){return e._id===n}));return l[o].postVotes=r,Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{posts:l})});case"INCREMENT_POST_COMMENTS_COUNT":var c=a.payload,s=JSON.parse(JSON.stringify(e.data.posts)),i=s.findIndex((function(e){return e._id===c}));return s[i].comments+=1,Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{posts:s})});case"DECREMENT_POST_COMMENTS_COUNT":var d=a.payload,u=d.decrementCount,m=d.postId,E=JSON.parse(JSON.stringify(e.data.posts)),O=E.findIndex((function(e){return e._id===m}));return E[O].comments-=u,Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{posts:E})});case"ADD_POSTS":var h=a.payload;return Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{posts:[].concat(Object(f.a)(e.data.posts),Object(f.a)(h))})});case"DELETE_POST":return Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{postCount:e.data.postCount-1,posts:e.data.posts.filter((function(e){return e._id!==a.payload}))})});case"FOLLOW_USER_START":return Object(p.a)(Object(p.a)({},e),{},{following:!0});case"FOLLOW_USER_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{following:!1,error:a.payload});case"FOLLOW_USER_SUCCESS":return"follow"===a.payload?Object(p.a)(Object(p.a)({},e),{},{following:!1,data:Object(p.a)(Object(p.a)({},e.data),{},{isFollowing:!0,followers:e.data.followers+1})}):Object(p.a)(Object(p.a)({},e),{},{following:!1,data:Object(p.a)(Object(p.a)({},e.data),{},{isFollowing:!1,followers:e.data.followers-1})});default:throw new Error("Invalid action type '".concat(a.type,"' passed to profileReducer."))}},h=t(22),b=t(88),g=t(37),_=t(58),S=t(205),j=t(95),y=t(51),w=t(27),N=t(57),v=t(198),T=t(125),C=t(522),F=t(7),k=t(119),A=t(25),I=t(209),P=t(131),L=t(18),R=function(e){var a=e.currentUser,t=e.data,n=e.showModal,r=e.token,l=e.follow,o=e.loading,i=t.user,d=i.avatar,u=i.username,m=i.bio,f=i.website,p=i.fullName,E=t.following,O=t.followers,h=t.postCount,b=function(e,a){r&&n({options:[],title:e?"Followers":"Following",cancelButton:!1,children:s.a.createElement(I.default,{userId:t.user._id,token:r,followersCount:e,followingCount:a,following:a})},"OptionsDialog/OptionsDialog")};return s.a.createElement("header",{className:"profile-header"},a&&a.username===u?s.a.createElement(k.default,null,s.a.createElement(A.default,{className:"profile-header__avatar",imageSrc:a.avatar})):s.a.createElement(A.default,{className:"profile-header__avatar",imageSrc:d}),s.a.createElement("div",{className:"profile-header__info"},s.a.createElement("div",{className:"profile-buttons"},s.a.createElement("h1",{className:"heading-1 font-thin"},u),function(){if(a){if(a.username===u)return s.a.createElement(c.Fragment,null,s.a.createElement(F.b,{to:"/settings/edit"},s.a.createElement(L.default,{inverted:!0},"Edit Profile")),s.a.createElement(v.default,null));if(t.isFollowing)return s.a.createElement(L.default,{loading:o,onClick:function(){return n({options:[{warning:!0,text:"Unfollow",onClick:function(){return l()}}],children:s.a.createElement(P.default,{avatar:t.user.avatar,username:t.user.username})},"OptionsDialog/OptionsDialog")},inverted:!0},"Following")}return s.a.createElement(L.default,{loading:o,onClick:function(){return l(t.user._id,r)}},"Follow")}()),s.a.createElement("div",{className:"profile-stats"},s.a.createElement("p",{className:"heading-3"},s.a.createElement("b",null,h)," ",1===h?"post":"posts"),s.a.createElement("p",{onClick:function(){return b(O)},style:{cursor:"pointer"},className:"heading-3"},s.a.createElement("b",null,O)," ",O>1||0===O?"followers":"follower"),s.a.createElement("p",{onClick:function(){return b(null,E)},style:{cursor:"pointer"},className:"heading-3"},s.a.createElement("b",null,E)," following")),s.a.createElement("div",null,p&&s.a.createElement("h3",{className:"heading-3"},s.a.createElement("b",null,p)),s.a.createElement("p",{className:"heading-3",style:{whiteSpace:"pre-wrap"}},m),f&&s.a.createElement("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"heading-3 link font-bold"},f))),s.a.createElement("div",{className:"profile-header__mobile-user-details"},s.a.createElement("div",null,p&&s.a.createElement("p",{className:"heading-3"},s.a.createElement("b",null,p)),s.a.createElement("h3",{className:"heading-3 font-medium",style:{whiteSpace:"pre-wrap"}},m),f&&s.a.createElement("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"heading-3 link font-bold"},f)),s.a.createElement("div",{className:"profile-stats"},s.a.createElement("h3",{className:"heading-3"},s.a.createElement("b",null,h),s.a.createElement("span",{className:"font-medium color-grey"},1===h?"post":"posts")),s.a.createElement("h3",{onClick:function(){return b(O)},style:{cursor:"pointer"},className:"heading-3"},s.a.createElement("b",null,O)," ",s.a.createElement("span",{className:"font-medium color-grey"},O>1||0===O?"followers":"follower")),s.a.createElement("h3",{onClick:function(){return b(null,E)},style:{cursor:"pointer"},className:"heading-3"},s.a.createElement("b",null,E),s.a.createElement("span",{className:"font-medium color-grey"},"following")))))},U=t(4),D=t(91),x=t(16),H=function(e){var a=e.currentUserProfile,t=e.username;return s.a.createElement("div",{className:"profile-empty"},s.a.createElement(U.default,{icon:"camera-outline",className:"icon--larger"}),a?s.a.createElement(c.Fragment,null,s.a.createElement("h1",{className:"heading-1 font-thin"},"Share Photos"),s.a.createElement("h3",{className:"heading-3 font-medium"},"When you share photos, they will appear on your profile."),s.a.createElement(D.default,{style:{width:"auto"}},s.a.createElement(x.default,{bold:!0,blue:!0,medium:!0,style:{pointerEvents:"none"}},"Share your first photo"))):s.a.createElement(c.Fragment,null,s.a.createElement("h1",{className:"heading-1 font-thin"},"No Posts Yet"),s.a.createElement("h3",{className:"heading-3 font-medium"},"When ",t," posts, you'll see their photos here.")))},M=Object(d.b)({currentUser:m.a,token:m.e});a.default=Object(i.b)(M,(function(e){return{showModal:function(a,t){return e(Object(h.b)(a,t))},hideModal:function(a){return e(Object(h.a)(a))}}}))((function(e){var a=e.currentUser,t=e.token,n=e.showModal,i=e.hideModal,d=Object(u.i)().username,m=Object(u.g)(),f=Object(c.useReducer)(O,E),p=Object(o.a)(f,2),h=p[0],F=p[1],k=function(){var e=Object(l.a)(r.a.mark((function e(){var l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",n({children:s.a.createElement(T.default,{onClick:function(){return i("Card/Card")},modal:!0}),style:{gridColumn:"center-start / center-end",justifySelf:"center",width:"40rem"}},"Card/Card"));case 2:return e.prev=2,F({type:"FOLLOW_USER_START"}),e.next=6,Object(b.a)(h.data.user._id,t);case 6:l=e.sent,F({type:"FOLLOW_USER_SUCCESS",payload:l.operation}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),F({type:"FOLLOW_USER_FAILURE",payload:e.t0});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();Object(_.a)(Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&h.data.posts.length<h.data.postCount)||h.fetchingAdditionalPosts){e.next=13;break}return e.prev=1,F({type:"FETCH_ADDITIONAL_POSTS_START"}),e.next=5,Object(g.g)(d,h.data.posts.length);case 5:a=e.sent,F({type:"FETCH_ADDITIONAL_POSTS_SUCCESS"}),F({type:"ADD_POSTS",payload:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),F({type:"FETCH_ADDITIONAL_POSTS_FAILURE",payload:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),null),Object(c.useEffect)((function(){document.title="@".concat(d," \u2022 Timcha photos"),Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F({type:"FETCH_PROFILE_START"}),e.next=4,Object(b.b)(d,t);case 4:a=e.sent,F({type:"FETCH_PROFILE_SUCCESS",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),F({type:"FETCH_PROFILE_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[d,t]);return h.error?s.a.createElement(C.default,null):s.a.createElement(c.Fragment,null,a&&a.username===d?s.a.createElement(N.default,null,s.a.createElement(v.default,null),s.a.createElement("h3",{className:"heading-3"},d),s.a.createElement("div",null)):s.a.createElement(N.default,{backArrow:!0},s.a.createElement("h3",{className:"heading-3"},d),s.a.createElement("div",null)),s.a.createElement("main",{className:"profile-page grid"},h.fetching?s.a.createElement(y.default,null):!h.fetching&&h.data?s.a.createElement(c.Fragment,null,s.a.createElement(R,{currentUser:a,data:h.data,showModal:n,token:t,follow:k,loading:h.following}),s.a.createElement(S.default,{category:"POSTS",icon:"apps-outline"}),h.data.posts.length>0?s.a.createElement("div",{className:"profile-images"},h.data.posts.map((function(e,a){return s.a.createElement(j.default,{onClick:function(){return a=e._id,void(window.outerWidth<=600?m.push("/post/".concat(a)):n({postId:a,avatar:h.data.avatar,profileDispatch:F},"PostDialog/PostDialog"));var a},image:e.image,likes:e.postVotes,comments:e.comments,filter:e.filter,key:a})})),h.fetchingAdditionalPosts&&s.a.createElement(c.Fragment,null,s.a.createElement("div",null,s.a.createElement(w.default,{animated:!0})),s.a.createElement("div",null,s.a.createElement(w.default,{animated:!0})),s.a.createElement("div",null,s.a.createElement(w.default,{animated:!0})))):s.a.createElement(H,{currentUserProfile:a&&a.username===d,username:d})):void 0))}))}}]);
//# sourceMappingURL=4.747f36a2.chunk.js.map